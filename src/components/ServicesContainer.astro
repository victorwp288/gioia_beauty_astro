---
/* src/components/ServicesContainer.astro */

// Import the Accordion component
import Accordion from './Accordian.astro'; // Ensure the path is correct

// Import your data
import manicureData from '../../data/manicureData.js';
import pedicureData from '../../data/pedicureData.js';
import cigliaSopraccigliaData from '../../data/cigliaSopraccigliaData.js';
import massaggiData from '../../data/massaggiData.js';
import cerettaData from '../../data/cerettaData.js';
import ritualiData from '../../data/ritualiData.js';
import makeupData from '../../data/makeupData.js';
import bagnoTurcoData from '../../data/bagnoTurcoData.js';

import { Image } from 'astro:assets'
import bagnoTurco from '../../images/bagno-turco.jpg'
import clock from '../../images/clock.svg'
import tick from '../../images/tick.svg'
import { OK } from 'astro:schema';

---
<div class="m-auto mt-2 w-[90vw] md:mt-12 md:w-[70vw]">
  <!-- Section Header -->
  <div class="flex flex-col gap-2 py-8 pb-6 md:gap-4 md:py-4">
    <h4 class="text-xs font-extrabold text-primary">ESPLORA</h4>
    <h2 class="font-serif text-3xl font-bold tracking-tight md:text-3xl">
      I nostri trattamenti
    </h2>
  </div>

  <!-- Scrollable Accordion Container -->
  <div
    id="scroll-container"
    class="flex snap-x snap-mandatory gap-4 overflow-x-auto md:flex-col md:overflow-x-visible"
  >
    <!-- Bagno Turco Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Bagno Turco"
        description="Seduta di bagno turco con aromaterapia e cromoterapia: ideale per purificare l'organismo attraverso la sudorazione, beneficiando il sistema nervoso, la pelle, e migliorando la circolazione sanguigna e linfatica."
        image="/images/makeup.jpg" 
        imagePosition="right"
      >
        <div class="grid gap-8 px-6 py-8 md:grid-cols-3 md:px-12 md:py-12">
          {bagnoTurcoData.map((service, index) => (
            <div class="flex flex-col gap-2" data-key={index}>
              <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
              <div class="flex items-center gap-1">
                <Image src={clock} width="18" height="18" alt="duration" />
                <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
              </div>
              <p class="text-sm font-light">{service.description}</p>
            </div>
          ))}
        </div>
      </Accordion>
    </div>
    
    <!-- Mani e Piedi Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Mani e piedi"
        description="Rivitalizza le tue mani e i tuoi piedi con i nostri trattamenti specializzati. Offriamo manicure e pedicure di alta qualità, scrub esfolianti e massaggi rilassanti per donare morbidezza e bellezza alla tua pelle."
        image="/images/feet.jpg" 
        imagePosition="left"
      >
        <div class="grid gap-12 px-6 pb-4 md:grid-cols-2 md:px-12 md:py-12">
          <!-- Manicure Section -->
          <div class="flex flex-col gap-10 pt-8">
            {manicureData.map((service, index) => (
              <div class="flex flex-col gap-2" data-key={index}>
                <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
                <div class="flex items-center gap-1">
                  <Image src={clock} width="18" height="18" alt="duration" />
                  <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
                </div>
                <p class="text-sm font-light">{service.description}</p>
                {service.subcategories && (
                  <div class="mt-4 grid gap-4 md:grid-cols-2">
                    {service.subcategories.map((subcategory, subIndex) => (
                      <div class="flex flex-col gap-2" data-key={subIndex}>
                        <div class="flex items-center gap-1">
                          <Image src={clock} width="18" height="18" alt="duration" />
                          <p class="text-sm font-normal text-gray-500">+{subcategory.duration}m</p>
                        </div>
                        <h4 class="w-[85%] text-xs font-medium text-gray-600">{subcategory.title}</h4>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </div>
          
          <!-- Pedicure Section -->
          <div class="flex flex-col gap-10">
            {pedicureData.map((service, index) => (
              <div class="flex flex-col gap-2" data-key={index}>
                <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
                <div class="flex items-center gap-1">
                  <Image src={clock} width="18" height="18" alt="duration" />
                  <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
                </div>
                <p class="text-sm font-light">{service.description}</p>
                {service.subcategories && (
                  <div class="mt-4 grid gap-4 md:grid-cols-2">
                    {service.subcategories.map((subcategory, subIndex) => (
                      <div class="flex flex-col gap-2" data-key={subIndex}>
                        <div class="flex items-center gap-1">
                          <Image src={clock} width="18" height="18" alt="duration" />
                          <p class="text-sm font-normal text-gray-500">+{subcategory.duration}m</p>
                        </div>
                        <h4 class="w-[85%] text-xs font-medium text-gray-600">{subcategory.title}</h4>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
      </Accordion>
    </div>
    
    <!-- Ciglia e Sopracciglia Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Ciglia e sopracciglia"
        description="Definisci il tuo sguardo con i nostri trattamenti per ciglia e sopracciglia. Offriamo laminazione, extension e design delle sopracciglia per uno sguardo intenso e affascinante."
        image="/images/ciglia.jpg"
        imagePosition="right"
      >
        <div class="grid gap-8 px-6 py-8 md:grid-cols-3 md:px-12 md:py-12">
          {cigliaSopraccigliaData.map((service, index) => (
            <div class="flex flex-col gap-2" data-key={index}>
              <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
              <div class="flex items-center gap-1">
                <Image src={clock} width="18" height="18" alt="duration" />
                <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
              </div>
              <p class="text-sm font-light">{service.description}</p>
            </div>
          ))}
        </div>
      </Accordion>
    </div>

    <!-- Massaggi Viso e Corpo Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Massaggi viso e corpo"
        description="Concediti un momento di relax con i nostri massaggi viso e corpo. Tecniche personalizzate per alleviare lo stress, migliorare la circolazione e tonificare la pelle, per un benessere completo."
        image="/images/massaggi.jpg" 
        imagePosition="left"
      >
        <div class="grid gap-8 px-6 py-8 md:grid-cols-2 md:px-12 md:py-12">
          {massaggiData.map((service, index) => (
            <div class="flex flex-col gap-2" data-key={index}>
              <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
              {service.duration && (
                <div class="flex items-center gap-1">
                  <Image src={clock} width="18" height="18" alt="duration" />
                  <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
                </div>
              )}
              <p class="text-sm font-light">{service.description}</p>
            </div>
          ))}
        </div>
      </Accordion>
    </div>

    <!-- Ceretta Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Ceretta"
        description="Dimentica la rasatura quotidiana con i nostri servizi di ceretta professionale. Offriamo trattamenti per tutte le aree del corpo, utilizzando prodotti di alta qualità per una pelle liscia e setosa a lungo."
        image="/images/ceretta.jpg"
        imagePosition="right"
      >
        <div class="flex flex-col">
          {cerettaData.map((service, index) => (
            <div class="flex flex-col gap-8 px-6 py-8 md:px-12 md:py-12" data-key={index}>
              <div class="flex flex-col gap-2">
                <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
                <div class="flex items-center gap-1">
                  {service.duration && (
                    <p class="text-xs font-normal text-gray-500">{service.duration}m</p>
                  )}
                </div>
                <p class="text-sm font-light md:w-[50%]">{service.description}</p>
              </div>

              {service.subcategories && (
                <div class="grid grid-cols-2 gap-x-4 gap-y-8 md:grid-cols-7">
                  {service.subcategories.map((subcategory, subIndex) => (
                    <div class="flex flex-col gap-2" data-key={subIndex}>
                      <div class="flex items-center gap-1">
                        <Image src={clock} width="18" height="18" alt="duration" />
                        <p class="text-sm font-normal text-gray-500">{subcategory.duration}m</p>
                      </div>
                      <h4 class="w-[85%] text-sm font-medium text-gray-600">{subcategory.title}</h4>
                    </div>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      </Accordion>
    </div>

    <!-- Rituali dal Mondo Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Rituali dal mondo"
        description="I rituali dal mondo propongono un’esperienza multisensoriale profondamente immersiva, a partire dagli aromi. Gli ingredienti e le pratiche proposte provengono direttamente dalle millenarie tradizioni di bellezza."
        image="/images/rituale.jpg" 
        imagePosition="left"
      >
        <div class="px-6 pb-12 md:px-12">
          <div class="flex flex-col gap-4 py-10">
            <div class="flex flex-col gap-1">
              <div class="flex gap-1">
                <Image src={clock} width="18" height="18" alt="duration" />
                <p class="text-sm font-normal text-gray-500">60m</p>
              </div>
              <p class="text-sm font-semibold text-gray-700">
                ESFOLIAZIONE, IMPACCO E APPLICAZIONE DELLA CREMA
              </p>
            </div>
            <div class="flex flex-col gap-1">
              <div class="flex gap-1">
                <Image src={clock} width="18" height="18" alt="duration" />
                <p class="text-sm font-normal text-gray-500">90m</p>
              </div>
              <p class="text-sm font-semibold text-gray-700">
                ESFOLIAZIONE, IMPACCO E MASSAGGIO DI 30 MINUTI
              </p>
            </div>
          </div>

          <div class="grid grid-cols-1 gap-10 md:grid-cols-2">
            {ritualiData.map((service, index) => (
              <div class="flex flex-col gap-2" data-key={index}>
                <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
                <div class="flex items-center gap-1">
                  {service.duration && (
                    <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
                  )}
                </div>
                <p class="text-sm font-light">{service.description}</p>
                {service.subcategories && (
                  <div class="py-6">
                    {service.subcategories.map((subcategory, subIndex) => (
                      <div class="flex flex-col gap-2" data-key={subIndex}>
                        <div class="flex items-center gap-1">
                          <Image src={tick} width="18" height="18" alt="subcategory indicator" />
                          {subcategory.duration && (
                            <p class="text-sm font-normal text-gray-500">{subcategory.duration}m</p>
                          )}
                        </div>
                        <h4 class="w-[85%] text-xs font-medium text-gray-600">{subcategory.title}</h4>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
      </Accordion>
    </div>

    <!-- Make-up e Acconciature Accordion -->
    <div class="min-w-full snap-center">
      <Accordion
        title="Make-up e acconciature"
        description="Esalta la tua bellezza naturale con i nostri servizi di make-up e acconciature. Dai look quotidiani alle occasioni speciali, i nostri esperti ti aiuteranno a trovare lo stile perfetto per te."
        image="/images/makeup.jpg"
        imagePosition="right"
      >
        <div class="grid grid-cols-1 gap-8 px-6 py-8 md:grid-cols-3 md:px-12 md:py-12">
          {makeupData.map((service, index) => (
            <div class="flex flex-col gap-2" data-key={index}>
              <h3 class="font-serif text-[1.3rem] font-bold">{service.title}</h3>
              {service.duration && (
                <div class="flex items-center gap-1">
                  <Image src={clock} width="18" height="18" alt="duration" />
                  <p class="text-sm font-normal text-gray-500">{service.duration}m</p>
                </div>
              )}
              <p class="text-sm font-light">{service.description}</p>
              {service.subcategories && (
                <div class="mt-4 grid grid-cols-1 gap-4 md:grid-cols-2">
                  {service.subcategories.map((subcategory, subIndex) => (
                    <div class="flex flex-col gap-2" data-key={subIndex}>
                      <div class="flex items-center gap-1">
                        <Image src={clock} width="18" height="18" alt="duration" />
                        <p class="text-sm font-normal text-gray-500">{subcategory.duration}m</p>
                      </div>
                      <h4 class="w-[85%] text-xs font-medium text-gray-600">{subcategory.title}</h4>
                    </div>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      </Accordion>
    </div>
  </div>

  <!-- Indicators -->
  <div class="flex justify-center p-2 lg:hidden">
    {[...Array(7)].map((_, i) => (
      <div
        data-key={`indicator-${i}`}
        class="mx-1 h-1 w-1 rounded-full bg-gray-200"
        data-indicator
      ></div>
    ))}
  </div>

  <!-- Price List Link -->
  <div class="text-center p-6">
    <a
      class="underline text-zinc-400 w-fit cursor-pointer text-center text-sm font-semibold"
      target="_blank"
      href="https://drive.google.com/file/d/1j1GXO8ZgGS3AV9_80Xjvj2bwqVT8GU_F/view?usp=sharing"
    >
      SCOPRI IL LISTINO PREZZI →
    </a>
  </div>
</div>

<!-- Client-Side JavaScript for Interactivity -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const scrollContainer = document.getElementById("scroll-container");
    const indicators = document.getElementById("indicators").children;
    let currentIndex = 0;

    const handleScroll = () => {
      const scrollPosition = scrollContainer.scrollLeft;
      const containerWidth = scrollContainer.offsetWidth;
      currentIndex = Math.round(scrollPosition / containerWidth);
      updateIndicators();
    };

    const updateIndicators = () => {
      for (let i = 0; i < indicators.length; i++) {
        if (i === currentIndex) {
          indicators[i].classList.add('bg-primary');
          indicators[i].classList.remove('bg-gray-200');
        } else {
          indicators[i].classList.remove('bg-primary');
          indicators[i].classList.add('bg-gray-200');
        }
      }
    };

    scrollContainer.addEventListener("scroll", handleScroll);

    // Optional: Handle resize if necessary
    window.addEventListener("resize", () => {
      handleScroll();
    });

    // Initial setup
    updateIndicators();
  });
</script>

