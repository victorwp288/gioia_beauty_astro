import{j as i}from"./jsx-runtime.Dhsgnf4I.js";import{c as Ie,g as Zr,r as b}from"./index.uubelm5h.js";import{s as Y}from"./supabaseClient.Cy5zftba.js";import{c as He,f as ae,a as We}from"./clsx.BxO5_u5y.js";import"./preload-helper.CLcXU_4U.js";const ea=(e,t,a,r)=>{if(a==="length"||a==="prototype"||a==="arguments"||a==="caller")return;const n=Object.getOwnPropertyDescriptor(e,a),o=Object.getOwnPropertyDescriptor(t,a);!ta(n,o)&&r||Object.defineProperty(e,a,o)},ta=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},ra=(e,t)=>{const a=Object.getPrototypeOf(t);a!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,a)},aa=(e,t)=>`/* Wrapped ${e}*/
${t}`,na=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),ia=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),oa=(e,t,a)=>{const r=a===""?"":`with ${a.trim()}() `,n=aa.bind(null,r,t.toString());Object.defineProperty(n,"name",ia),Object.defineProperty(e,"toString",{...na,value:n})},sa=(e,t,{ignoreNonConfigurable:a=!1}={})=>{const{name:r}=e;for(const n of Reflect.ownKeys(t))ea(e,t,n,a);return ra(e,t),oa(e,t,r),e};var la=sa,ut={exports:{}},ca=()=>{const e={};return e.promise=new Promise((t,a)=>{e.resolve=t,e.reject=a}),e};(function(e,t){var a=Ie&&Ie.__awaiter||function(s,l,u,c){return new(u||(u=Promise))(function(m,h){function f(x){try{w(c.next(x))}catch(D){h(D)}}function g(x){try{w(c.throw(x))}catch(D){h(D)}}function w(x){x.done?m(x.value):new u(function(D){D(x.value)}).then(f,g)}w((c=c.apply(s,l||[])).next())})},r=Ie&&Ie.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(ca);function o(s,l="maxAge"){let u,c,m;const h=()=>a(this,void 0,void 0,function*(){if(u!==void 0)return;const w=x=>a(this,void 0,void 0,function*(){m=n.default();const D=x[1][l]-Date.now();if(D<=0){s.delete(x[0]),m.resolve();return}return u=x[0],c=setTimeout(()=>{s.delete(x[0]),m&&m.resolve()},D),typeof c.unref=="function"&&c.unref(),m.promise});try{for(const x of s)yield w(x)}catch{}u=void 0}),f=()=>{u=void 0,c!==void 0&&(clearTimeout(c),c=void 0),m!==void 0&&(m.reject(void 0),m=void 0)},g=s.set.bind(s);return s.set=(w,x)=>{s.has(w)&&s.delete(w);const D=g(w,x);return u&&u===w&&f(),h(),D},h(),s}t.default=o,e.exports=o,e.exports.default=o})(ut,ut.exports);var ua=ut.exports;const da=la,fa=ua,it=new WeakMap,cr=new WeakMap,Re=(e,{cacheKey:t,cache:a=new Map,maxAge:r}={})=>{typeof r=="number"&&fa(a);const n=function(...o){const s=t?t(o):o[0],l=a.get(s);if(l)return l.data;const u=e.apply(this,o);return a.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return da(n,e,{ignoreNonConfigurable:!0}),cr.set(n,a),n};Re.decorator=(e={})=>(t,a,r)=>{const n=t[a];if(typeof n!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!it.has(this)){const o=Re(n,e);return it.set(this,o),o}return it.get(this)}};Re.clear=e=>{const t=cr.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var ma=Re;const ur=Zr(ma);function va(e){return typeof e=="string"}function ha(e,t,a){return a.indexOf(e)===t}function ga(e){return e.toLowerCase()===e}function Jt(e){return e.indexOf(",")===-1?e:e.split(",")}function dt(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],a=t===void 0?"":t;return dt(a)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],a=r===void 0?"":r;return dt(a)}if(e.indexOf("-")===-1||!ga(e))return e;var n=e.split("-"),o=n[0],s=n[1],l=s===void 0?"":s;return"".concat(o,"-").concat(l.toUpperCase())}function ya(e){var t=e===void 0?{}:e,a=t.useFallbackLocale,r=a===void 0?!0:a,n=t.fallbackLocale,o=n===void 0?"en-US":n,s=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],c=0,m=l;c<m.length;c++){var h=m[c];u=u.concat(Jt(h))}var f=navigator.language,g=f&&Jt(f);s=s.concat(u,g)}return r&&s.push(o),s.filter(va).map(dt).filter(ha)}var ba=ur(ya,{cacheKey:JSON.stringify});function xa(e){return ba(e)[0]||null}var dr=ur(xa,{cacheKey:JSON.stringify});function ne(e,t,a){return function(n,o){o===void 0&&(o=a);var s=e(n)+o;return t(s)}}function ke(e){return function(a){return new Date(e(a).getTime()-1)}}function Ae(e,t){return function(r){return[e(r),t(r)]}}function C(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function se(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function Ge(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function be(e){var t=C(e),a=t+(-t+1)%100,r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var wa=ne(C,be,-100),fr=ne(C,be,100),_t=ke(fr),pa=ne(C,_t,-100),mr=Ae(be,_t);function le(e){var t=C(e),a=t+(-t+1)%10,r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var vr=ne(C,le,-10),Ot=ne(C,le,10),Ue=ke(Ot),hr=ne(C,Ue,-10),gr=Ae(le,Ue);function xe(e){var t=C(e),a=new Date;return a.setFullYear(t,0,1),a.setHours(0,0,0,0),a}var yr=ne(C,xe,-1),St=ne(C,xe,1),Be=ke(St),br=ne(C,Be,-1),Da=Ae(xe,Be);function Ct(e,t){return function(r,n){n===void 0&&(n=t);var o=C(r),s=se(r)+n,l=new Date;return l.setFullYear(o,s,1),l.setHours(0,0,0,0),e(l)}}function de(e){var t=C(e),a=se(e),r=new Date;return r.setFullYear(t,a,1),r.setHours(0,0,0,0),r}var xr=Ct(de,-1),kt=Ct(de,1),Te=ke(kt),wr=Ct(Te,-1),ja=Ae(de,Te);function Na(e,t){return function(r,n){n===void 0&&(n=t);var o=C(r),s=se(r),l=Ge(r)+n,u=new Date;return u.setFullYear(o,s,l),u.setHours(0,0,0,0),e(u)}}function Ee(e){var t=C(e),a=se(e),r=Ge(e),n=new Date;return n.setFullYear(t,a,r),n.setHours(0,0,0,0),n}var _a=Na(Ee,1),At=ke(_a),Oa=Ae(Ee,At);function pr(e){return Ge(Te(e))}var M={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Sa={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Tt=[0,1,2,3,4,5,6],ot=new Map;function Ca(e){return function(a,r){var n=a||dr();ot.has(n)||ot.set(n,new Map);var o=ot.get(n);return o.has(e)||o.set(e,new Intl.DateTimeFormat(n||void 0,e).format),o.get(e)(r)}}function ka(e){var t=new Date(e);return new Date(t.setHours(12))}function fe(e){return function(t,a){return Ca(e)(t,ka(a))}}var Aa={day:"numeric"},Ta={day:"numeric",month:"long",year:"numeric"},Ea={month:"long"},Pa={month:"long",year:"numeric"},Ma={weekday:"short"},La={weekday:"long"},Ia={year:"numeric"},Wa=fe(Aa),Ya=fe(Ta),Va=fe(Ea),Dr=fe(Pa),Fa=fe(Ma),Ra=fe(La),qe=fe(Ia),$a=Tt[0],Ha=Tt[5],Kt=Tt[6];function Se(e,t){t===void 0&&(t=M.ISO_8601);var a=e.getDay();switch(t){case M.ISO_8601:return(a+6)%7;case M.ISLAMIC:return(a+1)%7;case M.HEBREW:case M.GREGORY:return a;default:throw new Error("Unsupported calendar type.")}}function Ga(e){var t=be(e);return C(t)}function Ua(e){var t=le(e);return C(t)}function ft(e,t){t===void 0&&(t=M.ISO_8601);var a=C(e),r=se(e),n=e.getDate()-Se(e,t);return new Date(a,r,n)}function Ba(e,t){t===void 0&&(t=M.ISO_8601);var a=t===M.GREGORY?M.GREGORY:M.ISO_8601,r=ft(e,t),n=C(e)+1,o,s;do o=new Date(n,0,a===M.ISO_8601?4:1),s=ft(o,t),n-=1;while(e<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function ue(e,t){switch(e){case"century":return be(t);case"decade":return le(t);case"year":return xe(t);case"month":return de(t);case"day":return Ee(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function qa(e,t){switch(e){case"century":return wa(t);case"decade":return vr(t);case"year":return yr(t);case"month":return xr(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function jr(e,t){switch(e){case"century":return fr(t);case"decade":return Ot(t);case"year":return St(t);case"month":return kt(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function za(e,t){switch(e){case"decade":return vr(t,-100);case"year":return yr(t,-10);case"month":return xr(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ja(e,t){switch(e){case"decade":return Ot(t,100);case"year":return St(t,10);case"month":return kt(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Nr(e,t){switch(e){case"century":return _t(t);case"decade":return Ue(t);case"year":return Be(t);case"month":return Te(t);case"day":return At(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ka(e,t){switch(e){case"century":return pa(t);case"decade":return hr(t);case"year":return br(t);case"month":return wr(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Xa(e,t){switch(e){case"decade":return hr(t,-100);case"year":return br(t,-10);case"month":return wr(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Xt(e,t){switch(e){case"century":return mr(t);case"decade":return gr(t);case"year":return Da(t);case"month":return ja(t);case"day":return Oa(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Qa(e,t,a){var r=[t,a].sort(function(n,o){return n.getTime()-o.getTime()});return[ue(e,r[0]),Nr(e,r[1])]}function _r(e,t,a){return a.map(function(r){return(t||qe)(e,r)}).join(" â€“ ")}function Za(e,t,a){return _r(e,t,mr(a))}function Or(e,t,a){return _r(e,t,gr(a))}function en(e){return e.getDay()===new Date().getDay()}function Sr(e,t){t===void 0&&(t=M.ISO_8601);var a=e.getDay();switch(t){case M.ISLAMIC:case M.HEBREW:return a===Ha||a===Kt;case M.ISO_8601:case M.GREGORY:return a===Kt||a===$a;default:throw new Error("Unsupported calendar type.")}}var te="react-calendar__navigation";function tn(e){var t=e.activeStartDate,a=e.drillUp,r=e.formatMonthYear,n=r===void 0?Dr:r,o=e.formatYear,s=o===void 0?qe:o,l=e.locale,u=e.maxDate,c=e.minDate,m=e.navigationAriaLabel,h=m===void 0?"":m,f=e.navigationAriaLive,g=e.navigationLabel,w=e.next2AriaLabel,x=w===void 0?"":w,D=e.next2Label,S=D===void 0?"Â»":D,H=e.nextAriaLabel,J=H===void 0?"":H,V=e.nextLabel,ie=V===void 0?"â€º":V,F=e.prev2AriaLabel,ce=F===void 0?"":F,G=e.prev2Label,re=G===void 0?"Â«":G,U=e.prevAriaLabel,me=U===void 0?"":U,K=e.prevLabel,ve=K===void 0?"â€¹":K,oe=e.setActiveStartDate,we=e.showDoubleView,I=e.view,pe=e.views,De=pe.indexOf(I)>0,X=I!=="century",P=qa(I,t),d=X?za(I,t):void 0,y=jr(I,t),j=X?Ja(I,t):void 0,N=function(){if(P.getFullYear()<0)return!0;var v=Ka(I,t);return c&&c>=v}(),O=X&&function(){if(d.getFullYear()<0)return!0;var v=Xa(I,t);return c&&c>=v}(),L=u&&u<y,W=X&&u&&u<j;function B(){oe(P,"prev")}function Q(){oe(d,"prev2")}function je(){oe(y,"next")}function Ne(){oe(j,"next2")}function he(v){var _=function(){switch(I){case"century":return Za(l,s,v);case"decade":return Or(l,s,v);case"year":return s(l,v);case"month":return n(l,v);default:throw new Error("Invalid view: ".concat(I,"."))}}();return g?g({date:v,label:_,locale:l||dr()||void 0,view:I}):_}function _e(){var v="".concat(te,"__label");return i.jsxs("button",{"aria-label":h,"aria-live":f,className:v,disabled:!De,onClick:a,style:{flexGrow:1},type:"button",children:[i.jsx("span",{className:"".concat(v,"__labelText ").concat(v,"__labelText--from"),children:he(t)}),we?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"".concat(v,"__divider"),children:" â€“ "}),i.jsx("span",{className:"".concat(v,"__labelText ").concat(v,"__labelText--to"),children:he(y)})]}):null]})}return i.jsxs("div",{className:te,children:[re!==null&&X?i.jsx("button",{"aria-label":ce,className:"".concat(te,"__arrow ").concat(te,"__prev2-button"),disabled:O,onClick:Q,type:"button",children:re}):null,ve!==null&&i.jsx("button",{"aria-label":me,className:"".concat(te,"__arrow ").concat(te,"__prev-button"),disabled:N,onClick:B,type:"button",children:ve}),_e(),ie!==null&&i.jsx("button",{"aria-label":J,className:"".concat(te,"__arrow ").concat(te,"__next-button"),disabled:L,onClick:je,type:"button",children:ie}),S!==null&&X?i.jsx("button",{"aria-label":x,className:"".concat(te,"__arrow ").concat(te,"__next2-button"),disabled:W,onClick:Ne,type:"button",children:S}):null]})}var ge=function(){return ge=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ge.apply(this,arguments)},rn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function Qt(e){return"".concat(e,"%")}function Et(e){var t=e.children,a=e.className,r=e.count,n=e.direction,o=e.offset,s=e.style,l=e.wrap,u=rn(e,["children","className","count","direction","offset","style","wrap"]);return i.jsx("div",ge({className:a,style:ge({display:"flex",flexDirection:n,flexWrap:l?"wrap":"nowrap"},s)},u,{children:b.Children.map(t,function(c,m){var h=o&&m===0?Qt(100*o/r):null;return b.cloneElement(c,ge(ge({},c.props),{style:{flexBasis:Qt(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:h,marginInlineStart:h,marginInlineEnd:0}}))})}))}function an(e,t,a){return t&&t>e?t:a&&a<e?a:e}function Ce(e,t){return t[0]<=e&&t[1]>=e}function nn(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function Cr(e,t){return Ce(e[0],t)||Ce(e[1],t)}function Zt(e,t,a){var r=Cr(t,e),n=[];if(r){n.push(a);var o=Ce(e[0],t),s=Ce(e[1],t);o&&n.push("".concat(a,"Start")),s&&n.push("".concat(a,"End")),o&&s&&n.push("".concat(a,"BothEnds"))}return n}function on(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function sn(e){if(!e)throw new Error("args is required");var t=e.value,a=e.date,r=e.hover,n="react-calendar__tile",o=[n];if(!a)return o;var s=new Date,l=function(){if(Array.isArray(a))return a;var g=e.dateType;if(!g)throw new Error("dateType is required when date is not an array of two dates");return Xt(g,a)}();if(Ce(s,l)&&o.push("".concat(n,"--now")),!t||!on(t))return o;var u=function(){if(Array.isArray(t))return t;var g=e.valueType;if(!g)throw new Error("valueType is required when value is not an array of two dates");return Xt(g,t)}();nn(u,l)?o.push("".concat(n,"--active")):Cr(u,l)&&o.push("".concat(n,"--hasActive"));var c=Zt(u,l,"".concat(n,"--range"));o.push.apply(o,c);var m=Array.isArray(t)?t:[t];if(r&&m.length===1){var h=r>u[0]?[u[0],r]:[r,u[0]],f=Zt(h,l,"".concat(n,"--hover"));o.push.apply(o,f)}return o}function ze(e){for(var t=e.className,a=e.count,r=a===void 0?3:a,n=e.dateTransform,o=e.dateType,s=e.end,l=e.hover,u=e.offset,c=e.renderTile,m=e.start,h=e.step,f=h===void 0?1:h,g=e.value,w=e.valueType,x=[],D=m;D<=s;D+=f){var S=n(D);x.push(c({classes:sn({date:S,dateType:o,hover:l,value:g,valueType:w}),date:S}))}return i.jsx(Et,{className:t,count:r,offset:u,wrap:!0,children:x})}function Je(e){var t=e.activeStartDate,a=e.children,r=e.classes,n=e.date,o=e.formatAbbr,s=e.locale,l=e.maxDate,u=e.maxDateTransform,c=e.minDate,m=e.minDateTransform,h=e.onClick,f=e.onMouseOver,g=e.style,w=e.tileClassName,x=e.tileContent,D=e.tileDisabled,S=e.view,H=b.useMemo(function(){var V={activeStartDate:t,date:n,view:S};return typeof w=="function"?w(V):w},[t,n,w,S]),J=b.useMemo(function(){var V={activeStartDate:t,date:n,view:S};return typeof x=="function"?x(V):x},[t,n,x,S]);return i.jsxs("button",{className:He(r,H),disabled:c&&m(c)>n||l&&u(l)<n||D?.({activeStartDate:t,date:n,view:S}),onClick:h?function(V){return h(n,V)}:void 0,onFocus:f?function(){return f(n)}:void 0,onMouseOver:f?function(){return f(n)}:void 0,style:g,type:"button",children:[o?i.jsx("abbr",{"aria-label":o(s,n),children:a}):a,J]})}var mt=function(){return mt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},mt.apply(this,arguments)},ln=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},er="react-calendar__century-view__decades__decade";function cn(e){var t=e.classes,a=t===void 0?[]:t,r=e.currentCentury,n=e.formatYear,o=n===void 0?qe:n,s=ln(e,["classes","currentCentury","formatYear"]),l=s.date,u=s.locale,c=[];return a&&c.push.apply(c,a),c.push(er),be(l).getFullYear()!==r&&c.push("".concat(er,"--neighboringCentury")),i.jsx(Je,mt({},s,{classes:c,maxDateTransform:Ue,minDateTransform:le,view:"century",children:Or(u,o,l)}))}var vt=function(){return vt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},vt.apply(this,arguments)},tr=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function un(e){var t=e.activeStartDate,a=e.hover,r=e.showNeighboringCentury,n=e.value,o=e.valueType,s=tr(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=Ga(t),u=l+(r?119:99);return i.jsx(ze,{className:"react-calendar__century-view__decades",dateTransform:le,dateType:"decade",end:u,hover:a,renderTile:function(c){var m=c.date,h=tr(c,["date"]);return i.jsx(cn,vt({},s,h,{activeStartDate:t,currentCentury:l,date:m}),m.getTime())},start:l,step:10,value:n,valueType:o})}var ht=function(){return ht=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ht.apply(this,arguments)};function dn(e){function t(){return i.jsx(un,ht({},e))}return i.jsx("div",{className:"react-calendar__century-view",children:t()})}var gt=function(){return gt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},gt.apply(this,arguments)},fn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},rr="react-calendar__decade-view__years__year";function mn(e){var t=e.classes,a=t===void 0?[]:t,r=e.currentDecade,n=e.formatYear,o=n===void 0?qe:n,s=fn(e,["classes","currentDecade","formatYear"]),l=s.date,u=s.locale,c=[];return a&&c.push.apply(c,a),c.push(rr),le(l).getFullYear()!==r&&c.push("".concat(rr,"--neighboringDecade")),i.jsx(Je,gt({},s,{classes:c,maxDateTransform:Be,minDateTransform:xe,view:"decade",children:o(u,l)}))}var yt=function(){return yt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},yt.apply(this,arguments)},ar=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function vn(e){var t=e.activeStartDate,a=e.hover,r=e.showNeighboringDecade,n=e.value,o=e.valueType,s=ar(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=Ua(t),u=l+(r?11:9);return i.jsx(ze,{className:"react-calendar__decade-view__years",dateTransform:xe,dateType:"year",end:u,hover:a,renderTile:function(c){var m=c.date,h=ar(c,["date"]);return i.jsx(mn,yt({},s,h,{activeStartDate:t,currentDecade:l,date:m}),m.getTime())},start:l,value:n,valueType:o})}var bt=function(){return bt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},bt.apply(this,arguments)};function hn(e){function t(){return i.jsx(vn,bt({},e))}return i.jsx("div",{className:"react-calendar__decade-view",children:t()})}var xt=function(){return xt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},xt.apply(this,arguments)},gn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},nr=function(e,t,a){if(a||arguments.length===2)for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},yn="react-calendar__year-view__months__month";function bn(e){var t=e.classes,a=t===void 0?[]:t,r=e.formatMonth,n=r===void 0?Va:r,o=e.formatMonthYear,s=o===void 0?Dr:o,l=gn(e,["classes","formatMonth","formatMonthYear"]),u=l.date,c=l.locale;return i.jsx(Je,xt({},l,{classes:nr(nr([],a,!0),[yn],!1),formatAbbr:s,maxDateTransform:Te,minDateTransform:de,view:"year",children:n(c,u)}))}var wt=function(){return wt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},wt.apply(this,arguments)},ir=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function xn(e){var t=e.activeStartDate,a=e.hover,r=e.value,n=e.valueType,o=ir(e,["activeStartDate","hover","value","valueType"]),s=0,l=11,u=C(t);return i.jsx(ze,{className:"react-calendar__year-view__months",dateTransform:function(c){var m=new Date;return m.setFullYear(u,c,1),de(m)},dateType:"month",end:l,hover:a,renderTile:function(c){var m=c.date,h=ir(c,["date"]);return i.jsx(bn,wt({},o,h,{activeStartDate:t,date:m}),m.getTime())},start:s,value:r,valueType:n})}var pt=function(){return pt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},pt.apply(this,arguments)};function wn(e){function t(){return i.jsx(xn,pt({},e))}return i.jsx("div",{className:"react-calendar__year-view",children:t()})}var Dt=function(){return Dt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Dt.apply(this,arguments)},pn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},st="react-calendar__month-view__days__day";function Dn(e){var t=e.calendarType,a=e.classes,r=a===void 0?[]:a,n=e.currentMonthIndex,o=e.formatDay,s=o===void 0?Wa:o,l=e.formatLongDate,u=l===void 0?Ya:l,c=pn(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),m=c.date,h=c.locale,f=[];return r&&f.push.apply(f,r),f.push(st),Sr(m,t)&&f.push("".concat(st,"--weekend")),m.getMonth()!==n&&f.push("".concat(st,"--neighboringMonth")),i.jsx(Je,Dt({},c,{classes:f,formatAbbr:u,maxDateTransform:At,minDateTransform:Ee,view:"month",children:s(h,m)}))}var jt=function(){return jt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},jt.apply(this,arguments)},or=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function jn(e){var t=e.activeStartDate,a=e.calendarType,r=e.hover,n=e.showFixedNumberOfWeeks,o=e.showNeighboringMonth,s=e.value,l=e.valueType,u=or(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=C(t),m=se(t),h=n||o,f=Se(t,a),g=h?0:f,w=(h?-f:0)+1,x=function(){if(n)return w+6*7-1;var D=pr(t);if(o){var S=new Date;S.setFullYear(c,m,D),S.setHours(0,0,0,0);var H=7-Se(S,a)-1;return D+H}return D}();return i.jsx(ze,{className:"react-calendar__month-view__days",count:7,dateTransform:function(D){var S=new Date;return S.setFullYear(c,m,D),Ee(S)},dateType:"day",hover:r,end:x,renderTile:function(D){var S=D.date,H=or(D,["date"]);return i.jsx(Dn,jt({},u,H,{activeStartDate:t,calendarType:a,currentMonthIndex:m,date:S}),S.getTime())},offset:g,start:w,value:s,valueType:l})}var kr="react-calendar__month-view__weekdays",lt="".concat(kr,"__weekday");function Nn(e){for(var t=e.calendarType,a=e.formatShortWeekday,r=a===void 0?Fa:a,n=e.formatWeekday,o=n===void 0?Ra:n,s=e.locale,l=e.onMouseLeave,u=new Date,c=de(u),m=C(c),h=se(c),f=[],g=1;g<=7;g+=1){var w=new Date(m,h,g-Se(c,t)),x=o(s,w);f.push(i.jsx("div",{className:He(lt,en(w)&&"".concat(lt,"--current"),Sr(w,t)&&"".concat(lt,"--weekend")),children:i.jsx("abbr",{"aria-label":x,title:x,children:r(s,w).replace(".","")})},g))}return i.jsx(Et,{className:kr,count:7,onFocus:l,onMouseOver:l,children:f})}var $e=function(){return $e=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},$e.apply(this,arguments)},sr=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},lr="react-calendar__tile";function _n(e){var t=e.onClickWeekNumber,a=e.weekNumber,r=i.jsx("span",{children:a});if(t){var n=e.date,o=e.onClickWeekNumber,s=e.weekNumber,l=sr(e,["date","onClickWeekNumber","weekNumber"]);return i.jsx("button",$e({},l,{className:lr,onClick:function(u){return o(s,n,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var l=sr(e,["date","onClickWeekNumber","weekNumber"]);return i.jsx("div",$e({},l,{className:lr,children:r}))}}function On(e){var t=e.activeStartDate,a=e.calendarType,r=e.onClickWeekNumber,n=e.onMouseLeave,o=e.showFixedNumberOfWeeks,s=function(){if(o)return 6;var c=pr(t),m=Se(t,a),h=c-(7-m);return 1+Math.ceil(h/7)}(),l=function(){for(var c=C(t),m=se(t),h=Ge(t),f=[],g=0;g<s;g+=1)f.push(ft(new Date(c,m,h+g*7),a));return f}(),u=l.map(function(c){return Ba(c,a)});return i.jsx(Et,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:n,onMouseOver:n,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(c,m){var h=l[m];if(!h)throw new Error("date is not defined");return i.jsx(_n,{date:h,onClickWeekNumber:r,weekNumber:c},c)})})}var Nt=function(){return Nt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Nt.apply(this,arguments)},Sn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function Cn(e){if(e)for(var t=0,a=Object.entries(Sa);t<a.length;t++){var r=a[t],n=r[0],o=r[1];if(o.includes(e))return n}return M.ISO_8601}function kn(e){var t=e.activeStartDate,a=e.locale,r=e.onMouseLeave,n=e.showFixedNumberOfWeeks,o=e.calendarType,s=o===void 0?Cn(a):o,l=e.formatShortWeekday,u=e.formatWeekday,c=e.onClickWeekNumber,m=e.showWeekNumbers,h=Sn(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function f(){return i.jsx(Nn,{calendarType:s,formatShortWeekday:l,formatWeekday:u,locale:a,onMouseLeave:r})}function g(){return m?i.jsx(On,{activeStartDate:t,calendarType:s,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:n}):null}function w(){return i.jsx(jn,Nt({calendarType:s},h))}var x="react-calendar__month-view";return i.jsx("div",{className:He(x,m?"".concat(x,"--weekNumbers"):""),children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[g(),i.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[f(),w()]})]})})}var ye=function(){return ye=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ye.apply(this,arguments)},Ye="react-calendar",Fe=["century","decade","year","month"],An=["decade","year","month","day"],Pt=new Date;Pt.setFullYear(1,0,1);Pt.setHours(0,0,0,0);var Tn=new Date(864e13);function Oe(e){return e instanceof Date?e:new Date(e)}function Ar(e,t){return Fe.slice(Fe.indexOf(e),Fe.indexOf(t)+1)}function En(e,t,a){var r=Ar(t,a);return r.indexOf(e)!==-1}function Mt(e,t,a){return e&&En(e,t,a)?e:a}function Tr(e){var t=Fe.indexOf(e);return An[t]}function Pn(e,t){var a=Array.isArray(e)?e[t]:e;if(!a)return null;var r=Oe(a);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function Er(e,t){var a=e.value,r=e.minDate,n=e.maxDate,o=e.maxDetail,s=Pn(a,t);if(!s)return null;var l=Tr(o),u=function(){switch(t){case 0:return ue(l,s);case 1:return Nr(l,s);default:throw new Error("Invalid index value: ".concat(t))}}();return an(u,r,n)}var Lt=function(e){return Er(e,0)},Pr=function(e){return Er(e,1)},Mn=function(e){return[Lt,Pr].map(function(t){return t(e)})};function Mr(e){var t=e.maxDate,a=e.maxDetail,r=e.minDate,n=e.minDetail,o=e.value,s=e.view,l=Mt(s,n,a),u=Lt({value:o,minDate:r,maxDate:t,maxDetail:a})||new Date;return ue(l,u)}function Ln(e){var t=e.activeStartDate,a=e.defaultActiveStartDate,r=e.defaultValue,n=e.defaultView,o=e.maxDate,s=e.maxDetail,l=e.minDate,u=e.minDetail,c=e.value,m=e.view,h=Mt(m,u,s),f=t||a;return f?ue(h,f):Mr({maxDate:o,maxDetail:s,minDate:l,minDetail:u,value:c||r,view:m||n})}function ct(e){return e&&(!Array.isArray(e)||e.length===1)}function Ve(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var In=b.forwardRef(function(t,a){var r=t.activeStartDate,n=t.allowPartialRange,o=t.calendarType,s=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,c=t.defaultView,m=t.formatDay,h=t.formatLongDate,f=t.formatMonth,g=t.formatMonthYear,w=t.formatShortWeekday,x=t.formatWeekday,D=t.formatYear,S=t.goToRangeStartOnSelect,H=S===void 0?!0:S,J=t.inputRef,V=t.locale,ie=t.maxDate,F=ie===void 0?Tn:ie,ce=t.maxDetail,G=ce===void 0?"month":ce,re=t.minDate,U=re===void 0?Pt:re,me=t.minDetail,K=me===void 0?"century":me,ve=t.navigationAriaLabel,oe=t.navigationAriaLive,we=t.navigationLabel,I=t.next2AriaLabel,pe=t.next2Label,De=t.nextAriaLabel,X=t.nextLabel,P=t.onActiveStartDateChange,d=t.onChange,y=t.onClickDay,j=t.onClickDecade,N=t.onClickMonth,O=t.onClickWeekNumber,L=t.onClickYear,W=t.onDrillDown,B=t.onDrillUp,Q=t.onViewChange,je=t.prev2AriaLabel,Ne=t.prev2Label,he=t.prevAriaLabel,_e=t.prevLabel,v=t.returnValue,_=v===void 0?"start":v,E=t.selectRange,Z=t.showDoubleView,It=t.showFixedNumberOfWeeks,Wt=t.showNavigation,Lr=Wt===void 0?!0:Wt,Ir=t.showNeighboringCentury,Wr=t.showNeighboringDecade,Yt=t.showNeighboringMonth,Yr=Yt===void 0?!0:Yt,Vr=t.showWeekNumbers,Fr=t.tileClassName,Rr=t.tileContent,$r=t.tileDisabled,Ke=t.value,Vt=t.view,Ft=b.useState(l),Hr=Ft[0],Pe=Ft[1],Rt=b.useState(null),Gr=Rt[0],$t=Rt[1],Ht=b.useState(Array.isArray(u)?u.map(function(p){return p!==null?Oe(p):null}):u!=null?Oe(u):null),Xe=Ht[0],Ur=Ht[1],Gt=b.useState(c),Br=Gt[0],Ut=Gt[1],R=r||Hr||Ln({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:c,maxDate:F,maxDetail:G,minDate:U,minDetail:K,value:Ke,view:Vt}),$=function(){var p=function(){return E&&ct(Xe)?Xe:Ke!==void 0?Ke:Xe}();return p?Array.isArray(p)?p.map(function(A){return A!==null?Oe(A):null}):p!==null?Oe(p):null:null}(),Me=Tr(G),k=Mt(Vt||Br,K,G),ee=Ar(K,G),qr=E?Gr:null,Qe=ee.indexOf(k)<ee.length-1,Bt=ee.indexOf(k)>0,qt=b.useCallback(function(p){var A=function(){switch(_){case"start":return Lt;case"end":return Pr;case"range":return Mn;default:throw new Error("Invalid returnValue.")}}();return A({maxDate:F,maxDetail:G,minDate:U,value:p})},[F,G,U,_]),Ze=b.useCallback(function(p,A){Pe(p);var T={action:A,activeStartDate:p,value:$,view:k};P&&!Ve(R,p)&&P(T)},[R,P,$,k]),Le=b.useCallback(function(p,A){var T=function(){switch(k){case"century":return j;case"decade":return L;case"year":return N;case"month":return y;default:throw new Error("Invalid view: ".concat(k,"."))}}();T&&T(p,A)},[y,j,N,L,k]),et=b.useCallback(function(p,A){if(Qe){Le(p,A);var T=ee[ee.indexOf(k)+1];if(!T)throw new Error("Attempted to drill down from the lowest view.");Pe(p),Ut(T);var q={action:"drillDown",activeStartDate:p,value:$,view:T};P&&!Ve(R,p)&&P(q),Q&&k!==T&&Q(q),W&&W(q)}},[R,Qe,P,Le,W,Q,$,k,ee]),tt=b.useCallback(function(){if(Bt){var p=ee[ee.indexOf(k)-1];if(!p)throw new Error("Attempted to drill up from the highest view.");var A=ue(p,R);Pe(A),Ut(p);var T={action:"drillUp",activeStartDate:A,value:$,view:p};P&&!Ve(R,A)&&P(T),Q&&k!==p&&Q(T),B&&B(T)}},[R,Bt,P,B,Q,$,k,ee]),rt=b.useCallback(function(p,A){var T=$;Le(p,A);var q=E&&!ct(T),z;if(E)if(q)z=ue(Me,p);else{if(!T)throw new Error("previousValue is required");if(Array.isArray(T))throw new Error("previousValue must not be an array");z=Qa(Me,T,p)}else z=qt(p);var nt=!E||q||H?Mr({maxDate:F,maxDetail:G,minDate:U,minDetail:K,value:z,view:k}):null;A.persist(),Pe(nt),Ur(z);var Xr={action:"onChange",activeStartDate:nt,value:z,view:k};if(P&&!Ve(R,nt)&&P(Xr),d)if(E){var Qr=ct(z);if(!Qr)d(z||null,A);else if(n){if(Array.isArray(z))throw new Error("value must not be an array");d([z||null,null],A)}}else d(z||null,A)},[R,n,qt,H,F,G,U,K,P,d,Le,E,$,Me,k]);function zr(p){$t(p)}function at(){$t(null)}b.useImperativeHandle(a,function(){return{activeStartDate:R,drillDown:et,drillUp:tt,onChange:rt,setActiveStartDate:Ze,value:$,view:k}},[R,et,tt,rt,Ze,$,k]);function zt(p){var A=p?jr(k,R):ue(k,R),T=Qe?et:rt,q={activeStartDate:A,hover:qr,locale:V,maxDate:F,minDate:U,onClick:T,onMouseOver:E?zr:void 0,tileClassName:Fr,tileContent:Rr,tileDisabled:$r,value:$,valueType:Me};switch(k){case"century":return i.jsx(dn,ye({formatYear:D,showNeighboringCentury:Ir},q));case"decade":return i.jsx(hn,ye({formatYear:D,showNeighboringDecade:Wr},q));case"year":return i.jsx(wn,ye({formatMonth:f,formatMonthYear:g},q));case"month":return i.jsx(kn,ye({calendarType:o,formatDay:m,formatLongDate:h,formatShortWeekday:w,formatWeekday:x,onClickWeekNumber:O,onMouseLeave:E?at:void 0,showFixedNumberOfWeeks:typeof It<"u"?It:Z,showNeighboringMonth:Yr,showWeekNumbers:Vr},q));default:throw new Error("Invalid view: ".concat(k,"."))}}function Jr(){return Lr?i.jsx(tn,{activeStartDate:R,drillUp:tt,formatMonthYear:g,formatYear:D,locale:V,maxDate:F,minDate:U,navigationAriaLabel:ve,navigationAriaLive:oe,navigationLabel:we,next2AriaLabel:I,next2Label:pe,nextAriaLabel:De,nextLabel:X,prev2AriaLabel:je,prev2Label:Ne,prevAriaLabel:he,prevLabel:_e,setActiveStartDate:Ze,showDoubleView:Z,view:k,views:ee}):null}var Kr=Array.isArray($)?$:[$];return i.jsxs("div",{className:He(Ye,E&&Kr.length===1&&"".concat(Ye,"--selectRange"),Z&&"".concat(Ye,"--doubleView"),s),ref:J,children:[Jr(),i.jsxs("div",{className:"".concat(Ye,"__viewContainer"),onBlur:E?at:void 0,onMouseLeave:E?at:void 0,children:[zt(),Z?zt(!0):null]})]})});const Wn=()=>{const[e,t]=b.useState([]),[a,r]=b.useState(!0),[n,o]=b.useState(!1),[s,l]=b.useState(null);b.useEffect(()=>{(async()=>{try{const{data:g,error:w}=await Y.from("newsletter_subscribers").select("*").order("created_at",{ascending:!1});if(w)throw w;t(g||[])}catch(g){console.error("Error fetching subscribers:",g),alert("Error fetching subscribers")}finally{r(!1)}})()},[]);const u=()=>{const f=e.map(g=>g.email).join(", ");navigator.clipboard.writeText(f).then(()=>alert("Emails copied to clipboard!")).catch(g=>{console.error("Failed to copy:",g),alert("Failed to copy emails")})},c=async f=>{l(f),o(!0)},m=async()=>{try{const{error:f}=await Y.from("newsletter_subscribers").delete().eq("id",s.id);if(f)throw f;t(e.filter(g=>g.id!==s.id)),o(!1),l(null)}catch(f){console.error("Error deleting subscriber:",f),alert("Error deleting subscriber")}},h=()=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Unsubscribe"}),i.jsxs("p",{className:"mb-6",children:["Are you sure you want to remove"," ",i.jsx("span",{className:"font-semibold",children:s?.email})," ","from the newsletter?"]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{onClick:()=>{o(!1),l(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Unsubscribe"})]})]})});return i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Newsletter Subscribers"}),i.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Copy All Emails"})]}),a?i.jsx("div",{className:"text-center py-4",children:"Loading subscribers..."}):e.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No subscribers yet"}):i.jsx("div",{className:"space-y-2",children:e.map(f=>i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-gray-50 rounded-lg",children:[i.jsx("span",{children:f.email}),i.jsx("button",{onClick:()=>c(f),className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Unsubscribe",children:"X"})]},f.id))}),n&&i.jsx(h,{})]})},Hn=()=>{const[e,t]=b.useState(null),[a,r]=b.useState(!0),[n,o]=b.useState(new Date),[s,l]=b.useState([]),[u,c]=b.useState(!1),[m,h]=b.useState(!1),[f,g]=b.useState(null),[w,x]=b.useState(!1),[D,S]=b.useState(!1),[H,J]=b.useState(!1),[V,ie]=b.useState([]),[F,ce]=b.useState([]),[G,re]=b.useState(!1);b.useEffect(()=>{(async()=>{try{const{data:{session:j}}=await Y.auth.getSession();if(console.log("Current session:",j),!j){console.log("No session found, redirecting to login"),window.location.replace("/login");return}t(j)}catch(j){console.error("Session check error:",j),window.location.replace("/login")}finally{r(!1)}})();const{data:{subscription:y}}=Y.auth.onAuthStateChange((j,N)=>{if(console.log("Auth state changed:",j,N),!N){window.location.replace("/login");return}t(N),r(!1)});return()=>y.unsubscribe()},[]),b.useEffect(()=>{n&&(async()=>{c(!0);try{const y=new Date(n);y.setHours(0,0,0,0);const j=new Date(n);j.setHours(23,59,59,999);const{data:N,error:O}=await Y.from("appointments").select("*").gte("start_time",y.toISOString()).lt("start_time",j.toISOString()).order("start_time",{ascending:!0});if(O)throw O;l(N||[])}catch(y){console.error("Error fetching appointments:",y)}finally{c(!1)}})()},[n]),b.useEffect(()=>{(async()=>{const{data:y,error:j}=await Y.from("vacation_periods").select("*").gte("end_date",new Date().toISOString());!j&&y?ie(y):console.error("Error fetching vacations:",j)})()},[]),b.useEffect(()=>{(async()=>{const{data:y,error:j}=await Y.from("regular_customers").select("*").order("name");!j&&y&&ce(y)})()},[]);const U=d=>{o(d)},me=async()=>{try{await Y.auth.signOut(),window.location.replace("/")}catch(d){console.error("Logout error:",d)}},K=d=>{g(d),h(!0)},ve=async d=>{try{const y=await fetch("/api/sendCancellation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email,client_name:d.client_name,appointment_type:d.appointment_type,start_time:d.start_time,duration_minutes:d.duration_minutes})}),j=await y.json();if(console.log("Server response:",j),!y.ok)throw new Error(j.message||"Failed to send email");return!0}catch(y){return console.error("Email sending error:",y),!1}},oe=async()=>{if(f)try{if(f.email&&!await ve(f)&&!confirm("Failed to send notification email. Continue with cancellation?"))return;const{error:d}=await Y.from("archived_appointments").insert([{client_name:f.client_name,phone_number:f.phone_number,email:f.email,notes:f.notes,appointment_type:f.appointment_type,start_time:f.start_time,duration_minutes:f.duration_minutes,archived_at:new Date().toISOString(),archived_by:e.user.email}]);if(d)throw d;const{error:y}=await Y.from("appointments").delete().match({id:f.id});if(y)throw y;l(s.filter(j=>j.id!==f.id)),h(!1),g(null),alert("Appuntamento archiviato con successo"+(f.email?" e email di notifica inviata":""))}catch(d){console.error("Error in archive process:",d),alert("Errore durante la cancellazione dell'appuntamento")}},we=async d=>{if(confirm("Are you sure you want to delete this vacation period?"))try{const{error:y}=await Y.from("vacation_periods").delete().eq("id",d);if(y)throw y;ie(j=>j.filter(N=>N.id!==d)),alert("Vacation period deleted successfully")}catch(y){console.error("Error deleting vacation:",y),alert("Error deleting vacation period")}},I=()=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Archive"}),i.jsxs("p",{className:"mb-6",children:["Are you sure you want to archive the appointment for"," ",i.jsx("span",{className:"font-semibold",children:f?.client_name})," ","on"," ",f&&ae(new Date(f.start_time),"dd/MM/yyyy HH:mm"),"?"]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{onClick:()=>{h(!1),g(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:oe,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Archive"})]})]})}),pe=()=>{const[d,y]=b.useState({client_name:"",phone_number:"",email:"",appointment_type:We[0]?.type||"",start_time:ae(new Date,"yyyy-MM-dd'T'HH:mm"),duration_minutes:We[0]?.durations[0]||60,notes:""}),[j,N]=b.useState(""),[O,L]=b.useState([]),[W,B]=b.useState(!1),Q=v=>{if(N(v),v.length>1){const _=F.filter(E=>E.name.toLowerCase().includes(v.toLowerCase()));L(_),B(!0)}else L([]),B(!1)},je=()=>{B(!W),L(W?[]:F)},Ne=v=>{y(_=>({..._,client_name:v.name,phone_number:v.phone_number||"",email:v.email||"",notes:v.notes||""})),N(v.name),L([]),B(!1)},he=v=>{const _=v.target.value,E=We.find(Z=>Z.type===_);y(Z=>({...Z,appointment_type:_,duration_minutes:E?.durations[0]||60}))},_e=async v=>{v.preventDefault(),S(!0);try{const{data:_,error:E}=await Y.from("appointments").insert([{...d,start_time:new Date(d.start_time).toISOString()}]).select().single();if(E)throw E;d.email&&await fetch("/api/sendConfirmation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_.email,client_name:_.client_name,appointment_type:_.appointment_type,start_time:_.start_time,duration_minutes:_.duration_minutes})}),l(Z=>[...Z,_]),x(!1),alert("Appointment created successfully")}catch(_){console.error("Error creating appointment:",_),alert("Error creating appointment")}finally{S(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-xl font-bold mb-6",children:"Create New Appointment"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Search Customer"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",className:"w-full p-2 border rounded-md pr-8",value:j,onChange:v=>Q(v.target.value),placeholder:"Search regular customers...",onClick:()=>B(!0)}),i.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:je,children:i.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${W?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),(O.length>0||W)&&i.jsx("div",{className:"absolute z-10 w-full bg-white border rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",children:O.map(v=>i.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>Ne(v),children:[i.jsx("div",{children:v.name}),(v.phone_number||v.email)&&i.jsxs("div",{className:"text-sm text-gray-500",children:[v.phone_number&&i.jsx("span",{children:v.phone_number}),v.phone_number&&v.email&&i.jsx("span",{children:" â€¢ "}),v.email&&i.jsx("span",{children:v.email})]})]},v.id))})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Client Name"}),i.jsx("input",{type:"text",className:"w-full p-2 border rounded-md",value:d.client_name,onChange:v=>y(_=>({..._,client_name:v.target.value}))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",className:"w-full p-2 border rounded-md",value:d.phone_number,onChange:v=>y(_=>({..._,phone_number:v.target.value}))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Email"}),i.jsx("input",{type:"email",className:"w-full p-2 border rounded-md",value:d.email,onChange:v=>y(_=>({..._,email:v.target.value}))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Appointment Type"}),i.jsx("select",{className:"w-full p-2 border rounded-md",value:d.appointment_type,onChange:he,children:We.map(v=>i.jsx("option",{value:v.type,children:v.type},v.id))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Start Time"}),i.jsx("input",{type:"datetime-local",className:"w-full p-2 border rounded-md",value:d.start_time,onChange:v=>y(_=>({..._,start_time:v.target.value}))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notes"}),i.jsx("textarea",{className:"w-full p-2 border rounded-md",value:d.notes,onChange:v=>y(_=>({..._,notes:v.target.value}))})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[i.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:_e,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create Appointment"})]})]})})},De=()=>{const[d,y]=b.useState({start_date:"",end_date:""}),j=async N=>{N.preventDefault();try{const{data:{user:O}}=await Y.auth.getUser();if(console.log("Current user data:",O),!O)throw new Error("No user found");const L={start_date:new Date(d.start_date).toISOString(),end_date:new Date(d.end_date+"T23:59:59").toISOString()};console.log("Inserting vacation data:",L);const{error:W}=await Y.from("vacation_periods").insert([L]);if(W)throw W;J(!1),alert("Vacation period added successfully")}catch(O){console.error("Error adding vacation period:",O),alert("Error adding vacation period")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Vacation Period"}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),i.jsx("input",{type:"date",required:!0,min:ae(new Date,"yyyy-MM-dd"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:d.start_date,onChange:N=>y(O=>({...O,start_date:N.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),i.jsx("input",{type:"date",required:!0,min:d.start_date||ae(new Date,"yyyy-MM-dd"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:d.end_date,onChange:N=>y(O=>({...O,end_date:N.target.value}))})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[i.jsx("button",{type:"button",onClick:()=>J(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Vacation"})]})]})]})})},X=()=>{const[d,y]=b.useState({name:"",phone_number:"",email:"",notes:""}),j=async N=>{N.preventDefault();try{const{data:O,error:L}=await Y.from("regular_customers").insert([d]).select().single();if(L)throw L;ce(W=>[...W,O]),re(!1),alert("Regular customer added successfully")}catch(O){console.error("Error adding regular customer:",O),alert("Error adding regular customer")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Regular Customer"}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),i.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:d.name,onChange:N=>y(O=>({...O,name:N.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),i.jsx("input",{type:"tel",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:d.phone_number,onChange:N=>y(O=>({...O,phone_number:N.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),i.jsx("input",{type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:d.email,onChange:N=>y(O=>({...O,email:N.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),i.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:d.notes,onChange:N=>y(O=>({...O,notes:N.target.value}))})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[i.jsx("button",{type:"button",onClick:()=>re(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Customer"})]})]})]})})},P=()=>i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Regular Customers"}),i.jsx("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Regular Customer"})]}),i.jsx("div",{className:"space-y-4",children:F.map(d=>i.jsxs("div",{className:"border p-4 rounded-lg hover:bg-gray-50",children:[i.jsx("h3",{className:"font-semibold",children:d.name}),i.jsx("p",{className:"text-sm text-gray-600",children:d.phone_number}),i.jsx("p",{className:"text-sm text-gray-600",children:d.email}),d.notes&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Notes: ",d.notes]})]},d.id))})]});return a?i.jsx("div",{className:"p-4",children:"Loading..."}):e?.user?i.jsxs("div",{className:"p-4 space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("h1",{className:"text-2xl bg-blue-600 text-white font-bold",children:["Welcome, ",e.user.email]}),i.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 font-bold text-white bg-green-600 rounded hover:bg-green-700",children:"Create Appointment"}),i.jsx("button",{onClick:()=>J(!0),className:"px-4 py-2 font-bold text-white bg-purple-600 rounded hover:bg-purple-700",children:"Add Vacation"})]}),i.jsx("button",{onClick:me,className:"px-4 py-2 font-bold text-white bg-blue-600 rounded hover:bg-blue-700",children:"Logout"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Calendar"}),i.jsx(In,{onChange:U,value:n,className:"w-full"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Appointments for ",ae(n,"dd/MM/yyyy")]}),u?i.jsx("div",{className:"text-center py-4",children:"Loading appointments..."}):s.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No appointments for this date"}):i.jsx("div",{className:"space-y-4",children:s.map(d=>i.jsxs("div",{className:"border p-4 rounded-lg hover:bg-gray-50 relative",children:[i.jsx("button",{onClick:()=>K(d),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Archive appointment",children:"Ã—"}),i.jsxs("div",{className:"flex justify-between items-start pr-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:d.client_name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[ae(new Date(d.start_time),"HH:mm")," -",ae(new Date(new Date(d.start_time).getTime()+d.duration_minutes*6e4),"HH:mm")]}),i.jsx("p",{className:"text-sm",children:d.appointment_type})]}),i.jsxs("div",{className:"text-right text-sm text-gray-500",children:[i.jsx("p",{children:d.phone_number}),i.jsx("p",{children:d.email})]})]}),d.notes&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Notes: ",d.notes]})]},d.id))})]})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Vacation Periods"}),i.jsx("button",{onClick:()=>J(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Vacation"})]}),i.jsxs("div",{className:"space-y-4",children:[V.map(d=>i.jsxs("div",{className:"border p-4 rounded-lg hover:bg-gray-50 relative",children:[i.jsx("button",{onClick:()=>we(d.id),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Delete vacation period",children:"Ã—"}),i.jsxs("div",{className:"pr-8",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["From: ",ae(new Date(d.start_date),"dd/MM/yyyy")]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["To: ",ae(new Date(d.end_date),"dd/MM/yyyy")]})]})]},d.id)),V.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No vacation periods scheduled"})]})]}),m&&i.jsx(I,{}),w&&i.jsx(pe,{}),H&&i.jsx(De,{}),G&&i.jsx(X,{}),i.jsx("div",{children:i.jsx(Wn,{})}),i.jsx("div",{className:"mt-8",children:i.jsx(P,{})})]}):i.jsx("div",{className:"p-4",children:"Redirecting to login..."})};export{Hn as default};
