import{j as i}from"./jsx-runtime.BtZcDuGr.js";import{c as Ee,g as Zr,r as D}from"./index.CTjT7uj6.js";import{s as V}from"./supabaseClient.DhNiIuGE.js";import{c as Ve,f as K,d as Pe}from"./clsx.Bn9NSjxW.js";import"./preload-helper.CLcXU_4U.js";const ea=(e,t,a,r)=>{if(a==="length"||a==="prototype"||a==="arguments"||a==="caller")return;const n=Object.getOwnPropertyDescriptor(e,a),o=Object.getOwnPropertyDescriptor(t,a);!ta(n,o)&&r||Object.defineProperty(e,a,o)},ta=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},ra=(e,t)=>{const a=Object.getPrototypeOf(t);a!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,a)},aa=(e,t)=>`/* Wrapped ${e}*/
${t}`,na=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),ia=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),oa=(e,t,a)=>{const r=a===""?"":`with ${a.trim()}() `,n=aa.bind(null,r,t.toString());Object.defineProperty(n,"name",ia),Object.defineProperty(e,"toString",{...na,value:n})},sa=(e,t,{ignoreNonConfigurable:a=!1}={})=>{const{name:r}=e;for(const n of Reflect.ownKeys(t))ea(e,t,n,a);return ra(e,t),oa(e,t,r),e};var la=sa,ut={exports:{}},ca=()=>{const e={};return e.promise=new Promise((t,a)=>{e.resolve=t,e.reject=a}),e};(function(e,t){var a=Ee&&Ee.__awaiter||function(s,l,u,c){return new(u||(u=Promise))(function(f,m){function d(g){try{x(c.next(g))}catch(p){m(p)}}function h(g){try{x(c.throw(g))}catch(p){m(p)}}function x(g){g.done?f(g.value):new u(function(p){p(g.value)}).then(d,h)}x((c=c.apply(s,l||[])).next())})},r=Ee&&Ee.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(ca);function o(s,l="maxAge"){let u,c,f;const m=()=>a(this,void 0,void 0,function*(){if(u!==void 0)return;const x=g=>a(this,void 0,void 0,function*(){f=n.default();const p=g[1][l]-Date.now();if(p<=0){s.delete(g[0]),f.resolve();return}return u=g[0],c=setTimeout(()=>{s.delete(g[0]),f&&f.resolve()},p),typeof c.unref=="function"&&c.unref(),f.promise});try{for(const g of s)yield x(g)}catch{}u=void 0}),d=()=>{u=void 0,c!==void 0&&(clearTimeout(c),c=void 0),f!==void 0&&(f.reject(void 0),f=void 0)},h=s.set.bind(s);return s.set=(x,g)=>{s.has(x)&&s.delete(x);const p=h(x,g);return u&&u===x&&d(),m(),p},m(),s}t.default=o,e.exports=o,e.exports.default=o})(ut,ut.exports);var ua=ut.exports;const da=la,fa=ua,it=new WeakMap,cr=new WeakMap,We=(e,{cacheKey:t,cache:a=new Map,maxAge:r}={})=>{typeof r=="number"&&fa(a);const n=function(...o){const s=t?t(o):o[0],l=a.get(s);if(l)return l.data;const u=e.apply(this,o);return a.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return da(n,e,{ignoreNonConfigurable:!0}),cr.set(n,a),n};We.decorator=(e={})=>(t,a,r)=>{const n=t[a];if(typeof n!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!it.has(this)){const o=We(n,e);return it.set(this,o),o}return it.get(this)}};We.clear=e=>{const t=cr.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var va=We;const ur=Zr(va);function ma(e){return typeof e=="string"}function ha(e,t,a){return a.indexOf(e)===t}function ya(e){return e.toLowerCase()===e}function Jt(e){return e.indexOf(",")===-1?e:e.split(",")}function dt(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],a=t===void 0?"":t;return dt(a)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],a=r===void 0?"":r;return dt(a)}if(e.indexOf("-")===-1||!ya(e))return e;var n=e.split("-"),o=n[0],s=n[1],l=s===void 0?"":s;return"".concat(o,"-").concat(l.toUpperCase())}function ga(e){var t=e===void 0?{}:e,a=t.useFallbackLocale,r=a===void 0?!0:a,n=t.fallbackLocale,o=n===void 0?"en-US":n,s=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],c=0,f=l;c<f.length;c++){var m=f[c];u=u.concat(Jt(m))}var d=navigator.language,h=d&&Jt(d);s=s.concat(u,h)}return r&&s.push(o),s.filter(ma).map(dt).filter(ha)}var ba=ur(ga,{cacheKey:JSON.stringify});function wa(e){return ba(e)[0]||null}var dr=ur(wa,{cacheKey:JSON.stringify});function X(e,t,a){return function(n,o){o===void 0&&(o=a);var s=e(n)+o;return t(s)}}function pe(e){return function(a){return new Date(e(a).getTime()-1)}}function De(e,t){return function(r){return[e(r),t(r)]}}function N(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function te(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function Fe(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function fe(e){var t=N(e),a=t+(-t+1)%100,r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var xa=X(N,fe,-100),fr=X(N,fe,100),_t=pe(fr),pa=X(N,_t,-100),vr=De(fe,_t);function re(e){var t=N(e),a=t+(-t+1)%10,r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var mr=X(N,re,-10),Nt=X(N,re,10),Re=pe(Nt),hr=X(N,Re,-10),yr=De(re,Re);function ve(e){var t=N(e),a=new Date;return a.setFullYear(t,0,1),a.setHours(0,0,0,0),a}var gr=X(N,ve,-1),St=X(N,ve,1),$e=pe(St),br=X(N,$e,-1),Da=De(ve,$e);function kt(e,t){return function(r,n){n===void 0&&(n=t);var o=N(r),s=te(r)+n,l=new Date;return l.setFullYear(o,s,1),l.setHours(0,0,0,0),e(l)}}function ie(e){var t=N(e),a=te(e),r=new Date;return r.setFullYear(t,a,1),r.setHours(0,0,0,0),r}var wr=kt(ie,-1),Ct=kt(ie,1),je=pe(Ct),xr=kt(je,-1),ja=De(ie,je);function Oa(e,t){return function(r,n){n===void 0&&(n=t);var o=N(r),s=te(r),l=Fe(r)+n,u=new Date;return u.setFullYear(o,s,l),u.setHours(0,0,0,0),e(u)}}function Oe(e){var t=N(e),a=te(e),r=Fe(e),n=new Date;return n.setFullYear(t,a,r),n.setHours(0,0,0,0),n}var _a=Oa(Oe,1),At=pe(_a),Na=De(Oe,At);function pr(e){return Fe(je(e))}var E={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Sa={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Tt=[0,1,2,3,4,5,6],ot=new Map;function ka(e){return function(a,r){var n=a||dr();ot.has(n)||ot.set(n,new Map);var o=ot.get(n);return o.has(e)||o.set(e,new Intl.DateTimeFormat(n||void 0,e).format),o.get(e)(r)}}function Ca(e){var t=new Date(e);return new Date(t.setHours(12))}function oe(e){return function(t,a){return ka(e)(t,Ca(a))}}var Aa={day:"numeric"},Ta={day:"numeric",month:"long",year:"numeric"},Ea={month:"long"},Pa={month:"long",year:"numeric"},Ma={weekday:"short"},La={weekday:"long"},Ia={year:"numeric"},Wa=oe(Aa),Ya=oe(Ta),Va=oe(Ea),Dr=oe(Pa),Fa=oe(Ma),Ra=oe(La),He=oe(Ia),$a=Tt[0],Ha=Tt[5],Kt=Tt[6];function we(e,t){t===void 0&&(t=E.ISO_8601);var a=e.getDay();switch(t){case E.ISO_8601:return(a+6)%7;case E.ISLAMIC:return(a+1)%7;case E.HEBREW:case E.GREGORY:return a;default:throw new Error("Unsupported calendar type.")}}function Ga(e){var t=fe(e);return N(t)}function Ua(e){var t=re(e);return N(t)}function ft(e,t){t===void 0&&(t=E.ISO_8601);var a=N(e),r=te(e),n=e.getDate()-we(e,t);return new Date(a,r,n)}function Ba(e,t){t===void 0&&(t=E.ISO_8601);var a=t===E.GREGORY?E.GREGORY:E.ISO_8601,r=ft(e,t),n=N(e)+1,o,s;do o=new Date(n,0,a===E.ISO_8601?4:1),s=ft(o,t),n-=1;while(e<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function ne(e,t){switch(e){case"century":return fe(t);case"decade":return re(t);case"year":return ve(t);case"month":return ie(t);case"day":return Oe(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function qa(e,t){switch(e){case"century":return xa(t);case"decade":return mr(t);case"year":return gr(t);case"month":return wr(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function jr(e,t){switch(e){case"century":return fr(t);case"decade":return Nt(t);case"year":return St(t);case"month":return Ct(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function za(e,t){switch(e){case"decade":return mr(t,-100);case"year":return gr(t,-10);case"month":return wr(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ja(e,t){switch(e){case"decade":return Nt(t,100);case"year":return St(t,10);case"month":return Ct(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Or(e,t){switch(e){case"century":return _t(t);case"decade":return Re(t);case"year":return $e(t);case"month":return je(t);case"day":return At(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ka(e,t){switch(e){case"century":return pa(t);case"decade":return hr(t);case"year":return br(t);case"month":return xr(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Xa(e,t){switch(e){case"decade":return hr(t,-100);case"year":return br(t,-10);case"month":return xr(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Xt(e,t){switch(e){case"century":return vr(t);case"decade":return yr(t);case"year":return Da(t);case"month":return ja(t);case"day":return Na(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Qa(e,t,a){var r=[t,a].sort(function(n,o){return n.getTime()-o.getTime()});return[ne(e,r[0]),Or(e,r[1])]}function _r(e,t,a){return a.map(function(r){return(t||He)(e,r)}).join(" – ")}function Za(e,t,a){return _r(e,t,vr(a))}function Nr(e,t,a){return _r(e,t,yr(a))}function en(e){return e.getDay()===new Date().getDay()}function Sr(e,t){t===void 0&&(t=E.ISO_8601);var a=e.getDay();switch(t){case E.ISLAMIC:case E.HEBREW:return a===Ha||a===Kt;case E.ISO_8601:case E.GREGORY:return a===Kt||a===$a;default:throw new Error("Unsupported calendar type.")}}var J="react-calendar__navigation";function tn(e){var t=e.activeStartDate,a=e.drillUp,r=e.formatMonthYear,n=r===void 0?Dr:r,o=e.formatYear,s=o===void 0?He:o,l=e.locale,u=e.maxDate,c=e.minDate,f=e.navigationAriaLabel,m=f===void 0?"":f,d=e.navigationAriaLive,h=e.navigationLabel,x=e.next2AriaLabel,g=x===void 0?"":x,p=e.next2Label,_=p===void 0?"»":p,W=e.nextAriaLabel,B=W===void 0?"":W,M=e.nextLabel,Q=M===void 0?"›":M,F=e.prev2AriaLabel,se=F===void 0?"":F,Y=e.prev2Label,ae=Y===void 0?"«":Y,R=e.prevAriaLabel,le=R===void 0?"":R,q=e.prevLabel,ce=q===void 0?"‹":q,Z=e.setActiveStartDate,v=e.showDoubleView,y=e.view,O=e.views,A=O.indexOf(y)>0,w=y!=="century",b=qa(y,t),P=w?za(y,t):void 0,$=jr(y,t),me=w?Ja(y,t):void 0,_e=function(){if(b.getFullYear()<0)return!0;var T=Ka(y,t);return c&&c>=T}(),Be=w&&function(){if(P.getFullYear()<0)return!0;var T=Xa(y,t);return c&&c>=T}(),Ne=u&&u<$,he=w&&u&&u<me;function ye(){Z(b,"prev")}function ee(){Z(P,"prev2")}function qe(){Z($,"next")}function ze(){Z(me,"next2")}function Se(T){var ge=function(){switch(y){case"century":return Za(l,s,T);case"decade":return Nr(l,s,T);case"year":return s(l,T);case"month":return n(l,T);default:throw new Error("Invalid view: ".concat(y,"."))}}();return h?h({date:T,label:ge,locale:l||dr()||void 0,view:y}):ge}function Je(){var T="".concat(J,"__label");return i.jsxs("button",{"aria-label":m,"aria-live":d,className:T,disabled:!A,onClick:a,style:{flexGrow:1},type:"button",children:[i.jsx("span",{className:"".concat(T,"__labelText ").concat(T,"__labelText--from"),children:Se(t)}),v?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"".concat(T,"__divider"),children:" – "}),i.jsx("span",{className:"".concat(T,"__labelText ").concat(T,"__labelText--to"),children:Se($)})]}):null]})}return i.jsxs("div",{className:J,children:[ae!==null&&w?i.jsx("button",{"aria-label":se,className:"".concat(J,"__arrow ").concat(J,"__prev2-button"),disabled:Be,onClick:ee,type:"button",children:ae}):null,ce!==null&&i.jsx("button",{"aria-label":le,className:"".concat(J,"__arrow ").concat(J,"__prev-button"),disabled:_e,onClick:ye,type:"button",children:ce}),Je(),Q!==null&&i.jsx("button",{"aria-label":B,className:"".concat(J,"__arrow ").concat(J,"__next-button"),disabled:Ne,onClick:qe,type:"button",children:Q}),_!==null&&w?i.jsx("button",{"aria-label":g,className:"".concat(J,"__arrow ").concat(J,"__next2-button"),disabled:he,onClick:ze,type:"button",children:_}):null]})}var ue=function(){return ue=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ue.apply(this,arguments)},rn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function Qt(e){return"".concat(e,"%")}function Et(e){var t=e.children,a=e.className,r=e.count,n=e.direction,o=e.offset,s=e.style,l=e.wrap,u=rn(e,["children","className","count","direction","offset","style","wrap"]);return i.jsx("div",ue({className:a,style:ue({display:"flex",flexDirection:n,flexWrap:l?"wrap":"nowrap"},s)},u,{children:D.Children.map(t,function(c,f){var m=o&&f===0?Qt(100*o/r):null;return D.cloneElement(c,ue(ue({},c.props),{style:{flexBasis:Qt(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:m,marginInlineStart:m,marginInlineEnd:0}}))})}))}function an(e,t,a){return t&&t>e?t:a&&a<e?a:e}function xe(e,t){return t[0]<=e&&t[1]>=e}function nn(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function kr(e,t){return xe(e[0],t)||xe(e[1],t)}function Zt(e,t,a){var r=kr(t,e),n=[];if(r){n.push(a);var o=xe(e[0],t),s=xe(e[1],t);o&&n.push("".concat(a,"Start")),s&&n.push("".concat(a,"End")),o&&s&&n.push("".concat(a,"BothEnds"))}return n}function on(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function sn(e){if(!e)throw new Error("args is required");var t=e.value,a=e.date,r=e.hover,n="react-calendar__tile",o=[n];if(!a)return o;var s=new Date,l=function(){if(Array.isArray(a))return a;var h=e.dateType;if(!h)throw new Error("dateType is required when date is not an array of two dates");return Xt(h,a)}();if(xe(s,l)&&o.push("".concat(n,"--now")),!t||!on(t))return o;var u=function(){if(Array.isArray(t))return t;var h=e.valueType;if(!h)throw new Error("valueType is required when value is not an array of two dates");return Xt(h,t)}();nn(u,l)?o.push("".concat(n,"--active")):kr(u,l)&&o.push("".concat(n,"--hasActive"));var c=Zt(u,l,"".concat(n,"--range"));o.push.apply(o,c);var f=Array.isArray(t)?t:[t];if(r&&f.length===1){var m=r>u[0]?[u[0],r]:[r,u[0]],d=Zt(m,l,"".concat(n,"--hover"));o.push.apply(o,d)}return o}function Ge(e){for(var t=e.className,a=e.count,r=a===void 0?3:a,n=e.dateTransform,o=e.dateType,s=e.end,l=e.hover,u=e.offset,c=e.renderTile,f=e.start,m=e.step,d=m===void 0?1:m,h=e.value,x=e.valueType,g=[],p=f;p<=s;p+=d){var _=n(p);g.push(c({classes:sn({date:_,dateType:o,hover:l,value:h,valueType:x}),date:_}))}return i.jsx(Et,{className:t,count:r,offset:u,wrap:!0,children:g})}function Ue(e){var t=e.activeStartDate,a=e.children,r=e.classes,n=e.date,o=e.formatAbbr,s=e.locale,l=e.maxDate,u=e.maxDateTransform,c=e.minDate,f=e.minDateTransform,m=e.onClick,d=e.onMouseOver,h=e.style,x=e.tileClassName,g=e.tileContent,p=e.tileDisabled,_=e.view,W=D.useMemo(function(){var M={activeStartDate:t,date:n,view:_};return typeof x=="function"?x(M):x},[t,n,x,_]),B=D.useMemo(function(){var M={activeStartDate:t,date:n,view:_};return typeof g=="function"?g(M):g},[t,n,g,_]);return i.jsxs("button",{className:Ve(r,W),disabled:c&&f(c)>n||l&&u(l)<n||p?.({activeStartDate:t,date:n,view:_}),onClick:m?function(M){return m(n,M)}:void 0,onFocus:d?function(){return d(n)}:void 0,onMouseOver:d?function(){return d(n)}:void 0,style:h,type:"button",children:[o?i.jsx("abbr",{"aria-label":o(s,n),children:a}):a,B]})}var vt=function(){return vt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},vt.apply(this,arguments)},ln=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},er="react-calendar__century-view__decades__decade";function cn(e){var t=e.classes,a=t===void 0?[]:t,r=e.currentCentury,n=e.formatYear,o=n===void 0?He:n,s=ln(e,["classes","currentCentury","formatYear"]),l=s.date,u=s.locale,c=[];return a&&c.push.apply(c,a),c.push(er),fe(l).getFullYear()!==r&&c.push("".concat(er,"--neighboringCentury")),i.jsx(Ue,vt({},s,{classes:c,maxDateTransform:Re,minDateTransform:re,view:"century",children:Nr(u,o,l)}))}var mt=function(){return mt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},mt.apply(this,arguments)},tr=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function un(e){var t=e.activeStartDate,a=e.hover,r=e.showNeighboringCentury,n=e.value,o=e.valueType,s=tr(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=Ga(t),u=l+(r?119:99);return i.jsx(Ge,{className:"react-calendar__century-view__decades",dateTransform:re,dateType:"decade",end:u,hover:a,renderTile:function(c){var f=c.date,m=tr(c,["date"]);return i.jsx(cn,mt({},s,m,{activeStartDate:t,currentCentury:l,date:f}),f.getTime())},start:l,step:10,value:n,valueType:o})}var ht=function(){return ht=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ht.apply(this,arguments)};function dn(e){function t(){return i.jsx(un,ht({},e))}return i.jsx("div",{className:"react-calendar__century-view",children:t()})}var yt=function(){return yt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},yt.apply(this,arguments)},fn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},rr="react-calendar__decade-view__years__year";function vn(e){var t=e.classes,a=t===void 0?[]:t,r=e.currentDecade,n=e.formatYear,o=n===void 0?He:n,s=fn(e,["classes","currentDecade","formatYear"]),l=s.date,u=s.locale,c=[];return a&&c.push.apply(c,a),c.push(rr),re(l).getFullYear()!==r&&c.push("".concat(rr,"--neighboringDecade")),i.jsx(Ue,yt({},s,{classes:c,maxDateTransform:$e,minDateTransform:ve,view:"decade",children:o(u,l)}))}var gt=function(){return gt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},gt.apply(this,arguments)},ar=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function mn(e){var t=e.activeStartDate,a=e.hover,r=e.showNeighboringDecade,n=e.value,o=e.valueType,s=ar(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=Ua(t),u=l+(r?11:9);return i.jsx(Ge,{className:"react-calendar__decade-view__years",dateTransform:ve,dateType:"year",end:u,hover:a,renderTile:function(c){var f=c.date,m=ar(c,["date"]);return i.jsx(vn,gt({},s,m,{activeStartDate:t,currentDecade:l,date:f}),f.getTime())},start:l,value:n,valueType:o})}var bt=function(){return bt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},bt.apply(this,arguments)};function hn(e){function t(){return i.jsx(mn,bt({},e))}return i.jsx("div",{className:"react-calendar__decade-view",children:t()})}var wt=function(){return wt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},wt.apply(this,arguments)},yn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},nr=function(e,t,a){if(a||arguments.length===2)for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},gn="react-calendar__year-view__months__month";function bn(e){var t=e.classes,a=t===void 0?[]:t,r=e.formatMonth,n=r===void 0?Va:r,o=e.formatMonthYear,s=o===void 0?Dr:o,l=yn(e,["classes","formatMonth","formatMonthYear"]),u=l.date,c=l.locale;return i.jsx(Ue,wt({},l,{classes:nr(nr([],a,!0),[gn],!1),formatAbbr:s,maxDateTransform:je,minDateTransform:ie,view:"year",children:n(c,u)}))}var xt=function(){return xt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},xt.apply(this,arguments)},ir=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function wn(e){var t=e.activeStartDate,a=e.hover,r=e.value,n=e.valueType,o=ir(e,["activeStartDate","hover","value","valueType"]),s=0,l=11,u=N(t);return i.jsx(Ge,{className:"react-calendar__year-view__months",dateTransform:function(c){var f=new Date;return f.setFullYear(u,c,1),ie(f)},dateType:"month",end:l,hover:a,renderTile:function(c){var f=c.date,m=ir(c,["date"]);return i.jsx(bn,xt({},o,m,{activeStartDate:t,date:f}),f.getTime())},start:s,value:r,valueType:n})}var pt=function(){return pt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},pt.apply(this,arguments)};function xn(e){function t(){return i.jsx(wn,pt({},e))}return i.jsx("div",{className:"react-calendar__year-view",children:t()})}var Dt=function(){return Dt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Dt.apply(this,arguments)},pn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},st="react-calendar__month-view__days__day";function Dn(e){var t=e.calendarType,a=e.classes,r=a===void 0?[]:a,n=e.currentMonthIndex,o=e.formatDay,s=o===void 0?Wa:o,l=e.formatLongDate,u=l===void 0?Ya:l,c=pn(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),f=c.date,m=c.locale,d=[];return r&&d.push.apply(d,r),d.push(st),Sr(f,t)&&d.push("".concat(st,"--weekend")),f.getMonth()!==n&&d.push("".concat(st,"--neighboringMonth")),i.jsx(Ue,Dt({},c,{classes:d,formatAbbr:u,maxDateTransform:At,minDateTransform:Oe,view:"month",children:s(m,f)}))}var jt=function(){return jt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},jt.apply(this,arguments)},or=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function jn(e){var t=e.activeStartDate,a=e.calendarType,r=e.hover,n=e.showFixedNumberOfWeeks,o=e.showNeighboringMonth,s=e.value,l=e.valueType,u=or(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=N(t),f=te(t),m=n||o,d=we(t,a),h=m?0:d,x=(m?-d:0)+1,g=function(){if(n)return x+6*7-1;var p=pr(t);if(o){var _=new Date;_.setFullYear(c,f,p),_.setHours(0,0,0,0);var W=7-we(_,a)-1;return p+W}return p}();return i.jsx(Ge,{className:"react-calendar__month-view__days",count:7,dateTransform:function(p){var _=new Date;return _.setFullYear(c,f,p),Oe(_)},dateType:"day",hover:r,end:g,renderTile:function(p){var _=p.date,W=or(p,["date"]);return i.jsx(Dn,jt({},u,W,{activeStartDate:t,calendarType:a,currentMonthIndex:f,date:_}),_.getTime())},offset:h,start:x,value:s,valueType:l})}var Cr="react-calendar__month-view__weekdays",lt="".concat(Cr,"__weekday");function On(e){for(var t=e.calendarType,a=e.formatShortWeekday,r=a===void 0?Fa:a,n=e.formatWeekday,o=n===void 0?Ra:n,s=e.locale,l=e.onMouseLeave,u=new Date,c=ie(u),f=N(c),m=te(c),d=[],h=1;h<=7;h+=1){var x=new Date(f,m,h-we(c,t)),g=o(s,x);d.push(i.jsx("div",{className:Ve(lt,en(x)&&"".concat(lt,"--current"),Sr(x,t)&&"".concat(lt,"--weekend")),children:i.jsx("abbr",{"aria-label":g,title:g,children:r(s,x).replace(".","")})},h))}return i.jsx(Et,{className:Cr,count:7,onFocus:l,onMouseOver:l,children:d})}var Ye=function(){return Ye=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ye.apply(this,arguments)},sr=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},lr="react-calendar__tile";function _n(e){var t=e.onClickWeekNumber,a=e.weekNumber,r=i.jsx("span",{children:a});if(t){var n=e.date,o=e.onClickWeekNumber,s=e.weekNumber,l=sr(e,["date","onClickWeekNumber","weekNumber"]);return i.jsx("button",Ye({},l,{className:lr,onClick:function(u){return o(s,n,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var l=sr(e,["date","onClickWeekNumber","weekNumber"]);return i.jsx("div",Ye({},l,{className:lr,children:r}))}}function Nn(e){var t=e.activeStartDate,a=e.calendarType,r=e.onClickWeekNumber,n=e.onMouseLeave,o=e.showFixedNumberOfWeeks,s=function(){if(o)return 6;var c=pr(t),f=we(t,a),m=c-(7-f);return 1+Math.ceil(m/7)}(),l=function(){for(var c=N(t),f=te(t),m=Fe(t),d=[],h=0;h<s;h+=1)d.push(ft(new Date(c,f,m+h*7),a));return d}(),u=l.map(function(c){return Ba(c,a)});return i.jsx(Et,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:n,onMouseOver:n,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(c,f){var m=l[f];if(!m)throw new Error("date is not defined");return i.jsx(_n,{date:m,onClickWeekNumber:r,weekNumber:c},c)})})}var Ot=function(){return Ot=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ot.apply(this,arguments)},Sn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function kn(e){if(e)for(var t=0,a=Object.entries(Sa);t<a.length;t++){var r=a[t],n=r[0],o=r[1];if(o.includes(e))return n}return E.ISO_8601}function Cn(e){var t=e.activeStartDate,a=e.locale,r=e.onMouseLeave,n=e.showFixedNumberOfWeeks,o=e.calendarType,s=o===void 0?kn(a):o,l=e.formatShortWeekday,u=e.formatWeekday,c=e.onClickWeekNumber,f=e.showWeekNumbers,m=Sn(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function d(){return i.jsx(On,{calendarType:s,formatShortWeekday:l,formatWeekday:u,locale:a,onMouseLeave:r})}function h(){return f?i.jsx(Nn,{activeStartDate:t,calendarType:s,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:n}):null}function x(){return i.jsx(jn,Ot({calendarType:s},m))}var g="react-calendar__month-view";return i.jsx("div",{className:Ve(g,f?"".concat(g,"--weekNumbers"):""),children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[h(),i.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[d(),x()]})]})})}var de=function(){return de=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},de.apply(this,arguments)},Me="react-calendar",Ie=["century","decade","year","month"],An=["decade","year","month","day"],Pt=new Date;Pt.setFullYear(1,0,1);Pt.setHours(0,0,0,0);var Tn=new Date(864e13);function be(e){return e instanceof Date?e:new Date(e)}function Ar(e,t){return Ie.slice(Ie.indexOf(e),Ie.indexOf(t)+1)}function En(e,t,a){var r=Ar(t,a);return r.indexOf(e)!==-1}function Mt(e,t,a){return e&&En(e,t,a)?e:a}function Tr(e){var t=Ie.indexOf(e);return An[t]}function Pn(e,t){var a=Array.isArray(e)?e[t]:e;if(!a)return null;var r=be(a);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function Er(e,t){var a=e.value,r=e.minDate,n=e.maxDate,o=e.maxDetail,s=Pn(a,t);if(!s)return null;var l=Tr(o),u=function(){switch(t){case 0:return ne(l,s);case 1:return Or(l,s);default:throw new Error("Invalid index value: ".concat(t))}}();return an(u,r,n)}var Lt=function(e){return Er(e,0)},Pr=function(e){return Er(e,1)},Mn=function(e){return[Lt,Pr].map(function(t){return t(e)})};function Mr(e){var t=e.maxDate,a=e.maxDetail,r=e.minDate,n=e.minDetail,o=e.value,s=e.view,l=Mt(s,n,a),u=Lt({value:o,minDate:r,maxDate:t,maxDetail:a})||new Date;return ne(l,u)}function Ln(e){var t=e.activeStartDate,a=e.defaultActiveStartDate,r=e.defaultValue,n=e.defaultView,o=e.maxDate,s=e.maxDetail,l=e.minDate,u=e.minDetail,c=e.value,f=e.view,m=Mt(f,u,s),d=t||a;return d?ne(m,d):Mr({maxDate:o,maxDetail:s,minDate:l,minDetail:u,value:c||r,view:f||n})}function ct(e){return e&&(!Array.isArray(e)||e.length===1)}function Le(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var In=D.forwardRef(function(t,a){var r=t.activeStartDate,n=t.allowPartialRange,o=t.calendarType,s=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,c=t.defaultView,f=t.formatDay,m=t.formatLongDate,d=t.formatMonth,h=t.formatMonthYear,x=t.formatShortWeekday,g=t.formatWeekday,p=t.formatYear,_=t.goToRangeStartOnSelect,W=_===void 0?!0:_,B=t.inputRef,M=t.locale,Q=t.maxDate,F=Q===void 0?Tn:Q,se=t.maxDetail,Y=se===void 0?"month":se,ae=t.minDate,R=ae===void 0?Pt:ae,le=t.minDetail,q=le===void 0?"century":le,ce=t.navigationAriaLabel,Z=t.navigationAriaLive,v=t.navigationLabel,y=t.next2AriaLabel,O=t.next2Label,A=t.nextAriaLabel,w=t.nextLabel,b=t.onActiveStartDateChange,P=t.onChange,$=t.onClickDay,me=t.onClickDecade,_e=t.onClickMonth,Be=t.onClickWeekNumber,Ne=t.onClickYear,he=t.onDrillDown,ye=t.onDrillUp,ee=t.onViewChange,qe=t.prev2AriaLabel,ze=t.prev2Label,Se=t.prevAriaLabel,Je=t.prevLabel,T=t.returnValue,ge=T===void 0?"start":T,H=t.selectRange,ke=t.showDoubleView,It=t.showFixedNumberOfWeeks,Wt=t.showNavigation,Lr=Wt===void 0?!0:Wt,Ir=t.showNeighboringCentury,Wr=t.showNeighboringDecade,Yt=t.showNeighboringMonth,Yr=Yt===void 0?!0:Yt,Vr=t.showWeekNumbers,Fr=t.tileClassName,Rr=t.tileContent,$r=t.tileDisabled,Ke=t.value,Vt=t.view,Ft=D.useState(l),Hr=Ft[0],Ce=Ft[1],Rt=D.useState(null),Gr=Rt[0],$t=Rt[1],Ht=D.useState(Array.isArray(u)?u.map(function(j){return j!==null?be(j):null}):u!=null?be(u):null),Xe=Ht[0],Ur=Ht[1],Gt=D.useState(c),Br=Gt[0],Ut=Gt[1],L=r||Hr||Ln({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:c,maxDate:F,maxDetail:Y,minDate:R,minDetail:q,value:Ke,view:Vt}),I=function(){var j=function(){return H&&ct(Xe)?Xe:Ke!==void 0?Ke:Xe}();return j?Array.isArray(j)?j.map(function(k){return k!==null?be(k):null}):j!==null?be(j):null:null}(),Ae=Tr(Y),S=Mt(Vt||Br,q,Y),z=Ar(q,Y),qr=H?Gr:null,Qe=z.indexOf(S)<z.length-1,Bt=z.indexOf(S)>0,qt=D.useCallback(function(j){var k=function(){switch(ge){case"start":return Lt;case"end":return Pr;case"range":return Mn;default:throw new Error("Invalid returnValue.")}}();return k({maxDate:F,maxDetail:Y,minDate:R,value:j})},[F,Y,R,ge]),Ze=D.useCallback(function(j,k){Ce(j);var C={action:k,activeStartDate:j,value:I,view:S};b&&!Le(L,j)&&b(C)},[L,b,I,S]),Te=D.useCallback(function(j,k){var C=function(){switch(S){case"century":return me;case"decade":return Ne;case"year":return _e;case"month":return $;default:throw new Error("Invalid view: ".concat(S,"."))}}();C&&C(j,k)},[$,me,_e,Ne,S]),et=D.useCallback(function(j,k){if(Qe){Te(j,k);var C=z[z.indexOf(S)+1];if(!C)throw new Error("Attempted to drill down from the lowest view.");Ce(j),Ut(C);var G={action:"drillDown",activeStartDate:j,value:I,view:C};b&&!Le(L,j)&&b(G),ee&&S!==C&&ee(G),he&&he(G)}},[L,Qe,b,Te,he,ee,I,S,z]),tt=D.useCallback(function(){if(Bt){var j=z[z.indexOf(S)-1];if(!j)throw new Error("Attempted to drill up from the highest view.");var k=ne(j,L);Ce(k),Ut(j);var C={action:"drillUp",activeStartDate:k,value:I,view:j};b&&!Le(L,k)&&b(C),ee&&S!==j&&ee(C),ye&&ye(C)}},[L,Bt,b,ye,ee,I,S,z]),rt=D.useCallback(function(j,k){var C=I;Te(j,k);var G=H&&!ct(C),U;if(H)if(G)U=ne(Ae,j);else{if(!C)throw new Error("previousValue is required");if(Array.isArray(C))throw new Error("previousValue must not be an array");U=Qa(Ae,C,j)}else U=qt(j);var nt=!H||G||W?Mr({maxDate:F,maxDetail:Y,minDate:R,minDetail:q,value:U,view:S}):null;k.persist(),Ce(nt),Ur(U);var Xr={action:"onChange",activeStartDate:nt,value:U,view:S};if(b&&!Le(L,nt)&&b(Xr),P)if(H){var Qr=ct(U);if(!Qr)P(U||null,k);else if(n){if(Array.isArray(U))throw new Error("value must not be an array");P([U||null,null],k)}}else P(U||null,k)},[L,n,qt,W,F,Y,R,q,b,P,Te,H,I,Ae,S]);function zr(j){$t(j)}function at(){$t(null)}D.useImperativeHandle(a,function(){return{activeStartDate:L,drillDown:et,drillUp:tt,onChange:rt,setActiveStartDate:Ze,value:I,view:S}},[L,et,tt,rt,Ze,I,S]);function zt(j){var k=j?jr(S,L):ne(S,L),C=Qe?et:rt,G={activeStartDate:k,hover:qr,locale:M,maxDate:F,minDate:R,onClick:C,onMouseOver:H?zr:void 0,tileClassName:Fr,tileContent:Rr,tileDisabled:$r,value:I,valueType:Ae};switch(S){case"century":return i.jsx(dn,de({formatYear:p,showNeighboringCentury:Ir},G));case"decade":return i.jsx(hn,de({formatYear:p,showNeighboringDecade:Wr},G));case"year":return i.jsx(xn,de({formatMonth:d,formatMonthYear:h},G));case"month":return i.jsx(Cn,de({calendarType:o,formatDay:f,formatLongDate:m,formatShortWeekday:x,formatWeekday:g,onClickWeekNumber:Be,onMouseLeave:H?at:void 0,showFixedNumberOfWeeks:typeof It<"u"?It:ke,showNeighboringMonth:Yr,showWeekNumbers:Vr},G));default:throw new Error("Invalid view: ".concat(S,"."))}}function Jr(){return Lr?i.jsx(tn,{activeStartDate:L,drillUp:tt,formatMonthYear:h,formatYear:p,locale:M,maxDate:F,minDate:R,navigationAriaLabel:ce,navigationAriaLive:Z,navigationLabel:v,next2AriaLabel:y,next2Label:O,nextAriaLabel:A,nextLabel:w,prev2AriaLabel:qe,prev2Label:ze,prevAriaLabel:Se,prevLabel:Je,setActiveStartDate:Ze,showDoubleView:ke,view:S,views:z}):null}var Kr=Array.isArray(I)?I:[I];return i.jsxs("div",{className:Ve(Me,H&&Kr.length===1&&"".concat(Me,"--selectRange"),ke&&"".concat(Me,"--doubleView"),s),ref:B,children:[Jr(),i.jsxs("div",{className:"".concat(Me,"__viewContainer"),onBlur:H?at:void 0,onMouseLeave:H?at:void 0,children:[zt(),ke?zt(!0):null]})]})});const Wn=()=>{const[e,t]=D.useState([]),[a,r]=D.useState(!0),[n,o]=D.useState(!1),[s,l]=D.useState(null);D.useEffect(()=>{(async()=>{try{const{data:h,error:x}=await V.from("newsletter_subscribers").select("*").order("created_at",{ascending:!1});if(x)throw x;t(h||[])}catch(h){console.error("Error fetching subscribers:",h),alert("Error fetching subscribers")}finally{r(!1)}})()},[]);const u=()=>{const d=e.map(h=>h.email).join(", ");navigator.clipboard.writeText(d).then(()=>alert("Emails copied to clipboard!")).catch(h=>{console.error("Failed to copy:",h),alert("Failed to copy emails")})},c=async d=>{l(d),o(!0)},f=async()=>{try{const{error:d}=await V.from("newsletter_subscribers").delete().eq("id",s.id);if(d)throw d;t(e.filter(h=>h.id!==s.id)),o(!1),l(null)}catch(d){console.error("Error deleting subscriber:",d),alert("Error deleting subscriber")}},m=()=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Unsubscribe"}),i.jsxs("p",{className:"mb-6",children:["Are you sure you want to remove"," ",i.jsx("span",{className:"font-semibold",children:s?.email})," ","from the newsletter?"]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{onClick:()=>{o(!1),l(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Unsubscribe"})]})]})});return i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Newsletter Subscribers"}),i.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Copy All Emails"})]}),a?i.jsx("div",{className:"text-center py-4",children:"Loading subscribers..."}):e.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No subscribers yet"}):i.jsx("div",{className:"space-y-2",children:e.map(d=>i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-gray-50 rounded-lg",children:[i.jsx("span",{children:d.email}),i.jsx("button",{onClick:()=>c(d),className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Unsubscribe",children:"X"})]},d.id))}),n&&i.jsx(m,{})]})},Hn=()=>{const[e,t]=D.useState(null),[a,r]=D.useState(!0),[n,o]=D.useState(new Date),[s,l]=D.useState([]),[u,c]=D.useState(!1),[f,m]=D.useState(!1),[d,h]=D.useState(null),[x,g]=D.useState(!1),[p,_]=D.useState(!1),[W,B]=D.useState(!1),[M,Q]=D.useState([]);D.useEffect(()=>{(async()=>{try{const{data:{session:O}}=await V.auth.getSession();if(console.log("Current session:",O),!O){console.log("No session found, redirecting to login"),window.location.replace("/login");return}t(O)}catch(O){console.error("Session check error:",O),window.location.replace("/login")}finally{r(!1)}})();const{data:{subscription:y}}=V.auth.onAuthStateChange((O,A)=>{if(console.log("Auth state changed:",O,A),!A){window.location.replace("/login");return}t(A),r(!1)});return()=>y.unsubscribe()},[]),D.useEffect(()=>{n&&(async()=>{c(!0);try{const y=new Date(n);y.setHours(0,0,0,0);const O=new Date(n);O.setHours(23,59,59,999);const{data:A,error:w}=await V.from("appointments").select("*").gte("start_time",y.toISOString()).lt("start_time",O.toISOString()).order("start_time",{ascending:!0});if(w)throw w;l(A||[])}catch(y){console.error("Error fetching appointments:",y)}finally{c(!1)}})()},[n]),D.useEffect(()=>{(async()=>{const{data:y,error:O}=await V.from("vacation_periods").select("*").gte("end_date",new Date().toISOString());!O&&y?Q(y):console.error("Error fetching vacations:",O)})()},[]);const F=v=>{o(v)},se=async()=>{try{await V.auth.signOut(),window.location.replace("/")}catch(v){console.error("Logout error:",v)}},Y=v=>{h(v),m(!0)},ae=async v=>{try{const y=await fetch("/api/sendCancellation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v.email,client_name:v.client_name,appointment_type:v.appointment_type,start_time:v.start_time,duration_minutes:v.duration_minutes})}),O=await y.json();if(console.log("Server response:",O),!y.ok)throw new Error(O.message||"Failed to send email");return!0}catch(y){return console.error("Email sending error:",y),!1}},R=async()=>{if(d)try{if(d.email&&!await ae(d)&&!confirm("Failed to send notification email. Continue with cancellation?"))return;const{error:v}=await V.from("archived_appointments").insert([{client_name:d.client_name,phone_number:d.phone_number,email:d.email,notes:d.notes,appointment_type:d.appointment_type,start_time:d.start_time,duration_minutes:d.duration_minutes,archived_at:new Date().toISOString(),archived_by:e.user.email}]);if(v)throw v;const{error:y}=await V.from("appointments").delete().match({id:d.id});if(y)throw y;l(s.filter(O=>O.id!==d.id)),m(!1),h(null),alert("Appuntamento archiviato con successo"+(d.email?" e email di notifica inviata":""))}catch(v){console.error("Error in archive process:",v),alert("Errore durante la cancellazione dell'appuntamento")}},le=async v=>{if(confirm("Are you sure you want to delete this vacation period?"))try{const{error:y}=await V.from("vacation_periods").delete().eq("id",v);if(y)throw y;Q(O=>O.filter(A=>A.id!==v)),alert("Vacation period deleted successfully")}catch(y){console.error("Error deleting vacation:",y),alert("Error deleting vacation period")}},q=()=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Archive"}),i.jsxs("p",{className:"mb-6",children:["Are you sure you want to archive the appointment for"," ",i.jsx("span",{className:"font-semibold",children:d?.client_name})," ","on"," ",d&&K(new Date(d.start_time),"dd/MM/yyyy HH:mm"),"?"]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{onClick:()=>{m(!1),h(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:R,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Archive"})]})]})}),ce=()=>{const[v,y]=D.useState({client_name:"",phone_number:"",email:"",appointment_type:Pe[0]?.type||"",start_time:K(new Date,"yyyy-MM-dd'T'HH:mm"),duration_minutes:Pe[0]?.durations[0]||60,notes:""}),O=w=>{const b=w.target.value,P=Pe.find($=>$.type===b);y($=>({...$,appointment_type:b,duration_minutes:P?.durations[0]||60}))},A=async w=>{w.preventDefault(),_(!0);try{const{data:b,error:P}=await V.from("appointments").insert([{...v,start_time:new Date(v.start_time).toISOString()}]).select().single();if(P)throw P;v.email&&await fetch("/api/sendConfirmation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:b.email,client_name:b.client_name,appointment_type:b.appointment_type,start_time:b.start_time,duration_minutes:b.duration_minutes})}),l($=>[...$,b]),g(!1),alert("Appointment created successfully")}catch(b){console.error("Error creating appointment:",b),alert("Error creating appointment")}finally{_(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New Appointment"}),i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Client Name"}),i.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.client_name,onChange:w=>y(b=>({...b,client_name:w.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),i.jsx("input",{type:"tel",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.phone_number,onChange:w=>y(b=>({...b,phone_number:w.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),i.jsx("input",{type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.email,onChange:w=>y(b=>({...b,email:w.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Appointment Type"}),i.jsx("select",{required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.appointment_type,onChange:O,children:Pe.map(w=>i.jsx("option",{value:w.type,children:w.type},w.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),i.jsx("input",{type:"datetime-local",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.start_time,onChange:w=>y(b=>({...b,start_time:w.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),i.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.notes,onChange:w=>y(b=>({...b,notes:w.target.value}))})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[i.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Creating...":"Create Appointment"})]})]})]})})},Z=()=>{const[v,y]=D.useState({start_date:"",end_date:""}),O=async A=>{A.preventDefault();try{const{data:{user:w}}=await V.auth.getUser();if(console.log("Current user data:",w),!w)throw new Error("No user found");const b={start_date:new Date(v.start_date).toISOString(),end_date:new Date(v.end_date+"T23:59:59").toISOString()};console.log("Inserting vacation data:",b);const{error:P}=await V.from("vacation_periods").insert([b]);if(P)throw P;B(!1),alert("Vacation period added successfully")}catch(w){console.error("Error adding vacation period:",w),alert("Error adding vacation period")}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Vacation Period"}),i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),i.jsx("input",{type:"date",required:!0,min:K(new Date,"yyyy-MM-dd"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.start_date,onChange:A=>y(w=>({...w,start_date:A.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),i.jsx("input",{type:"date",required:!0,min:v.start_date||K(new Date,"yyyy-MM-dd"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:v.end_date,onChange:A=>y(w=>({...w,end_date:A.target.value}))})]}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[i.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Vacation"})]})]})]})})};return a?i.jsx("div",{className:"p-4",children:"Loading..."}):e?.user?i.jsxs("div",{className:"p-4 space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("h1",{className:"text-2xl bg-blue-600 text-white font-bold",children:["Welcome, ",e.user.email]}),i.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 font-bold text-white bg-green-600 rounded hover:bg-green-700",children:"Create Appointment"}),i.jsx("button",{onClick:()=>B(!0),className:"px-4 py-2 font-bold text-white bg-purple-600 rounded hover:bg-purple-700",children:"Add Vacation"})]}),i.jsx("button",{onClick:se,className:"px-4 py-2 font-bold text-white bg-blue-600 rounded hover:bg-blue-700",children:"Logout"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Calendar"}),i.jsx(In,{onChange:F,value:n,className:"w-full"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Appointments for ",K(n,"dd/MM/yyyy")]}),u?i.jsx("div",{className:"text-center py-4",children:"Loading appointments..."}):s.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No appointments for this date"}):i.jsx("div",{className:"space-y-4",children:s.map(v=>i.jsxs("div",{className:"border p-4 rounded-lg hover:bg-gray-50 relative",children:[i.jsx("button",{onClick:()=>Y(v),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Archive appointment",children:"×"}),i.jsxs("div",{className:"flex justify-between items-start pr-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:v.client_name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[K(new Date(v.start_time),"HH:mm")," -",K(new Date(new Date(v.start_time).getTime()+v.duration_minutes*6e4),"HH:mm")]}),i.jsx("p",{className:"text-sm",children:v.appointment_type})]}),i.jsxs("div",{className:"text-right text-sm text-gray-500",children:[i.jsx("p",{children:v.phone_number}),i.jsx("p",{children:v.email})]})]}),v.notes&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Notes: ",v.notes]})]},v.id))})]})]}),i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Vacation Periods"}),i.jsx("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Vacation"})]}),i.jsxs("div",{className:"space-y-4",children:[M.map(v=>i.jsxs("div",{className:"border p-4 rounded-lg hover:bg-gray-50 relative",children:[i.jsx("button",{onClick:()=>le(v.id),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Delete vacation period",children:"×"}),i.jsxs("div",{className:"pr-8",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["From: ",K(new Date(v.start_date),"dd/MM/yyyy")]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["To: ",K(new Date(v.end_date),"dd/MM/yyyy")]})]})]},v.id)),M.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No vacation periods scheduled"})]})]}),f&&i.jsx(q,{}),x&&i.jsx(ce,{}),W&&i.jsx(Z,{}),i.jsx("div",{className:"mt-8",children:i.jsx(Wn,{})})]}):i.jsx("div",{className:"p-4",children:"Redirecting to login..."})};export{Hn as default};
