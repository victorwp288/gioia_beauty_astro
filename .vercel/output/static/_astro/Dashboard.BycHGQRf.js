import{j as i}from"./jsx-runtime.PRPpl5vZ.js";import{c as ke,g as Zr,r as x}from"./index.RYns6xqu.js";import{s as z}from"./supabaseClient.QrUiqz_S.js";import{f as Ce}from"./format.DItqpQ5D.js";import"./preload-helper.CLcXU_4U.js";function cr(e){var t,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=cr(e[t]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Me(){for(var e,t,a=0,r="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=cr(e))&&(r&&(r+=" "),r+=t);return r}const ea=(e,t,a,r)=>{if(a==="length"||a==="prototype"||a==="arguments"||a==="caller")return;const n=Object.getOwnPropertyDescriptor(e,a),o=Object.getOwnPropertyDescriptor(t,a);!ta(n,o)&&r||Object.defineProperty(e,a,o)},ta=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},ra=(e,t)=>{const a=Object.getPrototypeOf(t);a!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,a)},aa=(e,t)=>`/* Wrapped ${e}*/
${t}`,na=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),ia=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),oa=(e,t,a)=>{const r=a===""?"":`with ${a.trim()}() `,n=aa.bind(null,r,t.toString());Object.defineProperty(n,"name",ia),Object.defineProperty(e,"toString",{...na,value:n})},la=(e,t,{ignoreNonConfigurable:a=!1}={})=>{const{name:r}=e;for(const n of Reflect.ownKeys(t))ea(e,t,n,a);return ra(e,t),oa(e,t,r),e};var ca=la,st={exports:{}},sa=()=>{const e={};return e.promise=new Promise((t,a)=>{e.resolve=t,e.reject=a}),e};(function(e,t){var a=ke&&ke.__awaiter||function(l,c,u,s){return new(u||(u=Promise))(function(d,v){function f(y){try{g(s.next(y))}catch(b){v(b)}}function m(y){try{g(s.throw(y))}catch(b){v(b)}}function g(y){y.done?d(y.value):new u(function(b){b(y.value)}).then(f,m)}g((s=s.apply(l,c||[])).next())})},r=ke&&ke.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(sa);function o(l,c="maxAge"){let u,s,d;const v=()=>a(this,void 0,void 0,function*(){if(u!==void 0)return;const g=y=>a(this,void 0,void 0,function*(){d=n.default();const b=y[1][c]-Date.now();if(b<=0){l.delete(y[0]),d.resolve();return}return u=y[0],s=setTimeout(()=>{l.delete(y[0]),d&&d.resolve()},b),typeof s.unref=="function"&&s.unref(),d.promise});try{for(const y of l)yield g(y)}catch{}u=void 0}),f=()=>{u=void 0,s!==void 0&&(clearTimeout(s),s=void 0),d!==void 0&&(d.reject(void 0),d=void 0)},m=l.set.bind(l);return l.set=(g,y)=>{l.has(g)&&l.delete(g);const b=m(g,y);return u&&u===g&&f(),v(),b},v(),l}t.default=o,e.exports=o,e.exports.default=o})(st,st.exports);var ua=st.exports;const fa=ca,da=ua,nt=new WeakMap,sr=new WeakMap,Ee=(e,{cacheKey:t,cache:a=new Map,maxAge:r}={})=>{typeof r=="number"&&da(a);const n=function(...o){const l=t?t(o):o[0],c=a.get(l);if(c)return c.data;const u=e.apply(this,o);return a.set(l,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return fa(n,e,{ignoreNonConfigurable:!0}),sr.set(n,a),n};Ee.decorator=(e={})=>(t,a,r)=>{const n=t[a];if(typeof n!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!nt.has(this)){const o=Ee(n,e);return nt.set(this,o),o}return nt.get(this)}};Ee.clear=e=>{const t=sr.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var va=Ee;const ur=Zr(va);function ma(e){return typeof e=="string"}function ha(e,t,a){return a.indexOf(e)===t}function ya(e){return e.toLowerCase()===e}function zt(e){return e.indexOf(",")===-1?e:e.split(",")}function ut(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],a=t===void 0?"":t;return ut(a)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],a=r===void 0?"":r;return ut(a)}if(e.indexOf("-")===-1||!ya(e))return e;var n=e.split("-"),o=n[0],l=n[1],c=l===void 0?"":l;return"".concat(o,"-").concat(c.toUpperCase())}function ga(e){var t=e===void 0?{}:e,a=t.useFallbackLocale,r=a===void 0?!0:a,n=t.fallbackLocale,o=n===void 0?"en-US":n,l=[];if(typeof navigator<"u"){for(var c=navigator.languages||[],u=[],s=0,d=c;s<d.length;s++){var v=d[s];u=u.concat(zt(v))}var f=navigator.language,m=f&&zt(f);l=l.concat(u,m)}return r&&l.push(o),l.filter(ma).map(ut).filter(ha)}var ba=ur(ga,{cacheKey:JSON.stringify});function wa(e){return ba(e)[0]||null}var fr=ur(wa,{cacheKey:JSON.stringify});function G(e,t,a){return function(n,o){o===void 0&&(o=a);var l=e(n)+o;return t(l)}}function he(e){return function(a){return new Date(e(a).getTime()-1)}}function ye(e,t){return function(r){return[e(r),t(r)]}}function O(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function K(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function We(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function ie(e){var t=O(e),a=t+(-t+1)%100,r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var xa=G(O,ie,-100),dr=G(O,ie,100),_t=he(dr),Da=G(O,_t,-100),vr=ye(ie,_t);function J(e){var t=O(e),a=t+(-t+1)%10,r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}var mr=G(O,J,-10),jt=G(O,J,10),Ie=he(jt),hr=G(O,Ie,-10),yr=ye(J,Ie);function oe(e){var t=O(e),a=new Date;return a.setFullYear(t,0,1),a.setHours(0,0,0,0),a}var gr=G(O,oe,-1),St=G(O,oe,1),Ye=he(St),br=G(O,Ye,-1),pa=ye(oe,Ye);function Nt(e,t){return function(r,n){n===void 0&&(n=t);var o=O(r),l=K(r)+n,c=new Date;return c.setFullYear(o,l,1),c.setHours(0,0,0,0),e(c)}}function Z(e){var t=O(e),a=K(e),r=new Date;return r.setFullYear(t,a,1),r.setHours(0,0,0,0),r}var wr=Nt(Z,-1),kt=Nt(Z,1),ge=he(kt),xr=Nt(ge,-1),Oa=ye(Z,ge);function _a(e,t){return function(r,n){n===void 0&&(n=t);var o=O(r),l=K(r),c=We(r)+n,u=new Date;return u.setFullYear(o,l,c),u.setHours(0,0,0,0),e(u)}}function be(e){var t=O(e),a=K(e),r=We(e),n=new Date;return n.setFullYear(t,a,r),n.setHours(0,0,0,0),n}var ja=_a(be,1),Ct=he(ja),Sa=ye(be,Ct);function Dr(e){return We(ge(e))}var C={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},Na={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},At=[0,1,2,3,4,5,6],it=new Map;function ka(e){return function(a,r){var n=a||fr();it.has(n)||it.set(n,new Map);var o=it.get(n);return o.has(e)||o.set(e,new Intl.DateTimeFormat(n||void 0,e).format),o.get(e)(r)}}function Ca(e){var t=new Date(e);return new Date(t.setHours(12))}function ee(e){return function(t,a){return ka(e)(t,Ca(a))}}var Aa={day:"numeric"},Ta={day:"numeric",month:"long",year:"numeric"},Pa={month:"long"},Ea={month:"long",year:"numeric"},La={weekday:"short"},Ma={weekday:"long"},Wa={year:"numeric"},Ia=ee(Aa),Ya=ee(Ta),Fa=ee(Pa),pr=ee(Ea),Va=ee(La),Ra=ee(Ma),Fe=ee(Wa),$a=At[0],Ga=At[5],Kt=At[6];function ve(e,t){t===void 0&&(t=C.ISO_8601);var a=e.getDay();switch(t){case C.ISO_8601:return(a+6)%7;case C.ISLAMIC:return(a+1)%7;case C.HEBREW:case C.GREGORY:return a;default:throw new Error("Unsupported calendar type.")}}function Ha(e){var t=ie(e);return O(t)}function Ua(e){var t=J(e);return O(t)}function ft(e,t){t===void 0&&(t=C.ISO_8601);var a=O(e),r=K(e),n=e.getDate()-ve(e,t);return new Date(a,r,n)}function Ba(e,t){t===void 0&&(t=C.ISO_8601);var a=t===C.GREGORY?C.GREGORY:C.ISO_8601,r=ft(e,t),n=O(e)+1,o,l;do o=new Date(n,0,a===C.ISO_8601?4:1),l=ft(o,t),n-=1;while(e<l);return Math.round((r.getTime()-l.getTime())/(864e5*7))+1}function Q(e,t){switch(e){case"century":return ie(t);case"decade":return J(t);case"year":return oe(t);case"month":return Z(t);case"day":return be(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function qa(e,t){switch(e){case"century":return xa(t);case"decade":return mr(t);case"year":return gr(t);case"month":return wr(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Or(e,t){switch(e){case"century":return dr(t);case"decade":return jt(t);case"year":return St(t);case"month":return kt(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function za(e,t){switch(e){case"decade":return mr(t,-100);case"year":return gr(t,-10);case"month":return wr(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ka(e,t){switch(e){case"decade":return jt(t,100);case"year":return St(t,10);case"month":return kt(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function _r(e,t){switch(e){case"century":return _t(t);case"decade":return Ie(t);case"year":return Ye(t);case"month":return ge(t);case"day":return Ct(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ja(e,t){switch(e){case"century":return Da(t);case"decade":return hr(t);case"year":return br(t);case"month":return xr(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Xa(e,t){switch(e){case"decade":return hr(t,-100);case"year":return br(t,-10);case"month":return xr(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Jt(e,t){switch(e){case"century":return vr(t);case"decade":return yr(t);case"year":return pa(t);case"month":return Oa(t);case"day":return Sa(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Qa(e,t,a){var r=[t,a].sort(function(n,o){return n.getTime()-o.getTime()});return[Q(e,r[0]),_r(e,r[1])]}function jr(e,t,a){return a.map(function(r){return(t||Fe)(e,r)}).join(" â€“ ")}function Za(e,t,a){return jr(e,t,vr(a))}function Sr(e,t,a){return jr(e,t,yr(a))}function en(e){return e.getDay()===new Date().getDay()}function Nr(e,t){t===void 0&&(t=C.ISO_8601);var a=e.getDay();switch(t){case C.ISLAMIC:case C.HEBREW:return a===Ga||a===Kt;case C.ISO_8601:case C.GREGORY:return a===Kt||a===$a;default:throw new Error("Unsupported calendar type.")}}var $="react-calendar__navigation";function tn(e){var t=e.activeStartDate,a=e.drillUp,r=e.formatMonthYear,n=r===void 0?pr:r,o=e.formatYear,l=o===void 0?Fe:o,c=e.locale,u=e.maxDate,s=e.minDate,d=e.navigationAriaLabel,v=d===void 0?"":d,f=e.navigationAriaLive,m=e.navigationLabel,g=e.next2AriaLabel,y=g===void 0?"":g,b=e.next2Label,p=b===void 0?"Â»":b,L=e.nextAriaLabel,X=L===void 0?"":L,h=e.nextLabel,S=h===void 0?"â€º":h,D=e.prev2AriaLabel,F=D===void 0?"":D,T=e.prev2Label,le=T===void 0?"Â«":T,V=e.prevAriaLabel,we=V===void 0?"":V,H=e.prevLabel,xe=H===void 0?"â€¹":H,te=e.setActiveStartDate,$e=e.showDoubleView,M=e.view,Ge=e.views,He=Ge.indexOf(M)>0,U=M!=="century",A=qa(M,t),B=U?za(M,t):void 0,re=Or(M,t),ce=U?Ka(M,t):void 0,De=function(){if(A.getFullYear()<0)return!0;var k=Ja(M,t);return s&&s>=k}(),Ue=U&&function(){if(B.getFullYear()<0)return!0;var k=Xa(M,t);return s&&s>=k}(),pe=u&&u<re,se=U&&u&&u<ce;function ue(){te(A,"prev")}function q(){te(B,"prev2")}function Be(){te(re,"next")}function qe(){te(ce,"next2")}function Oe(k){var fe=function(){switch(M){case"century":return Za(c,l,k);case"decade":return Sr(c,l,k);case"year":return l(c,k);case"month":return n(c,k);default:throw new Error("Invalid view: ".concat(M,"."))}}();return m?m({date:k,label:fe,locale:c||fr()||void 0,view:M}):fe}function ze(){var k="".concat($,"__label");return i.jsxs("button",{"aria-label":v,"aria-live":f,className:k,disabled:!He,onClick:a,style:{flexGrow:1},type:"button",children:[i.jsx("span",{className:"".concat(k,"__labelText ").concat(k,"__labelText--from"),children:Oe(t)}),$e?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"".concat(k,"__divider"),children:" â€“ "}),i.jsx("span",{className:"".concat(k,"__labelText ").concat(k,"__labelText--to"),children:Oe(re)})]}):null]})}return i.jsxs("div",{className:$,children:[le!==null&&U?i.jsx("button",{"aria-label":F,className:"".concat($,"__arrow ").concat($,"__prev2-button"),disabled:Ue,onClick:q,type:"button",children:le}):null,xe!==null&&i.jsx("button",{"aria-label":we,className:"".concat($,"__arrow ").concat($,"__prev-button"),disabled:De,onClick:ue,type:"button",children:xe}),ze(),S!==null&&i.jsx("button",{"aria-label":X,className:"".concat($,"__arrow ").concat($,"__next-button"),disabled:pe,onClick:Be,type:"button",children:S}),p!==null&&U?i.jsx("button",{"aria-label":y,className:"".concat($,"__arrow ").concat($,"__next2-button"),disabled:se,onClick:qe,type:"button",children:p}):null]})}var ae=function(){return ae=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ae.apply(this,arguments)},rn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function Xt(e){return"".concat(e,"%")}function Tt(e){var t=e.children,a=e.className,r=e.count,n=e.direction,o=e.offset,l=e.style,c=e.wrap,u=rn(e,["children","className","count","direction","offset","style","wrap"]);return i.jsx("div",ae({className:a,style:ae({display:"flex",flexDirection:n,flexWrap:c?"wrap":"nowrap"},l)},u,{children:x.Children.map(t,function(s,d){var v=o&&d===0?Xt(100*o/r):null;return x.cloneElement(s,ae(ae({},s.props),{style:{flexBasis:Xt(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:v,marginInlineStart:v,marginInlineEnd:0}}))})}))}function an(e,t,a){return t&&t>e?t:a&&a<e?a:e}function me(e,t){return t[0]<=e&&t[1]>=e}function nn(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function kr(e,t){return me(e[0],t)||me(e[1],t)}function Qt(e,t,a){var r=kr(t,e),n=[];if(r){n.push(a);var o=me(e[0],t),l=me(e[1],t);o&&n.push("".concat(a,"Start")),l&&n.push("".concat(a,"End")),o&&l&&n.push("".concat(a,"BothEnds"))}return n}function on(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function ln(e){if(!e)throw new Error("args is required");var t=e.value,a=e.date,r=e.hover,n="react-calendar__tile",o=[n];if(!a)return o;var l=new Date,c=function(){if(Array.isArray(a))return a;var m=e.dateType;if(!m)throw new Error("dateType is required when date is not an array of two dates");return Jt(m,a)}();if(me(l,c)&&o.push("".concat(n,"--now")),!t||!on(t))return o;var u=function(){if(Array.isArray(t))return t;var m=e.valueType;if(!m)throw new Error("valueType is required when value is not an array of two dates");return Jt(m,t)}();nn(u,c)?o.push("".concat(n,"--active")):kr(u,c)&&o.push("".concat(n,"--hasActive"));var s=Qt(u,c,"".concat(n,"--range"));o.push.apply(o,s);var d=Array.isArray(t)?t:[t];if(r&&d.length===1){var v=r>u[0]?[u[0],r]:[r,u[0]],f=Qt(v,c,"".concat(n,"--hover"));o.push.apply(o,f)}return o}function Ve(e){for(var t=e.className,a=e.count,r=a===void 0?3:a,n=e.dateTransform,o=e.dateType,l=e.end,c=e.hover,u=e.offset,s=e.renderTile,d=e.start,v=e.step,f=v===void 0?1:v,m=e.value,g=e.valueType,y=[],b=d;b<=l;b+=f){var p=n(b);y.push(s({classes:ln({date:p,dateType:o,hover:c,value:m,valueType:g}),date:p}))}return i.jsx(Tt,{className:t,count:r,offset:u,wrap:!0,children:y})}function Re(e){var t=e.activeStartDate,a=e.children,r=e.classes,n=e.date,o=e.formatAbbr,l=e.locale,c=e.maxDate,u=e.maxDateTransform,s=e.minDate,d=e.minDateTransform,v=e.onClick,f=e.onMouseOver,m=e.style,g=e.tileClassName,y=e.tileContent,b=e.tileDisabled,p=e.view,L=x.useMemo(function(){var h={activeStartDate:t,date:n,view:p};return typeof g=="function"?g(h):g},[t,n,g,p]),X=x.useMemo(function(){var h={activeStartDate:t,date:n,view:p};return typeof y=="function"?y(h):y},[t,n,y,p]);return i.jsxs("button",{className:Me(r,L),disabled:s&&d(s)>n||c&&u(c)<n||b?.({activeStartDate:t,date:n,view:p}),onClick:v?function(h){return v(n,h)}:void 0,onFocus:f?function(){return f(n)}:void 0,onMouseOver:f?function(){return f(n)}:void 0,style:m,type:"button",children:[o?i.jsx("abbr",{"aria-label":o(l,n),children:a}):a,X]})}var dt=function(){return dt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},dt.apply(this,arguments)},cn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},Zt="react-calendar__century-view__decades__decade";function sn(e){var t=e.classes,a=t===void 0?[]:t,r=e.currentCentury,n=e.formatYear,o=n===void 0?Fe:n,l=cn(e,["classes","currentCentury","formatYear"]),c=l.date,u=l.locale,s=[];return a&&s.push.apply(s,a),s.push(Zt),ie(c).getFullYear()!==r&&s.push("".concat(Zt,"--neighboringCentury")),i.jsx(Re,dt({},l,{classes:s,maxDateTransform:Ie,minDateTransform:J,view:"century",children:Sr(u,o,c)}))}var vt=function(){return vt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},vt.apply(this,arguments)},er=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function un(e){var t=e.activeStartDate,a=e.hover,r=e.showNeighboringCentury,n=e.value,o=e.valueType,l=er(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),c=Ha(t),u=c+(r?119:99);return i.jsx(Ve,{className:"react-calendar__century-view__decades",dateTransform:J,dateType:"decade",end:u,hover:a,renderTile:function(s){var d=s.date,v=er(s,["date"]);return i.jsx(sn,vt({},l,v,{activeStartDate:t,currentCentury:c,date:d}),d.getTime())},start:c,step:10,value:n,valueType:o})}var mt=function(){return mt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},mt.apply(this,arguments)};function fn(e){function t(){return i.jsx(un,mt({},e))}return i.jsx("div",{className:"react-calendar__century-view",children:t()})}var ht=function(){return ht=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ht.apply(this,arguments)},dn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},tr="react-calendar__decade-view__years__year";function vn(e){var t=e.classes,a=t===void 0?[]:t,r=e.currentDecade,n=e.formatYear,o=n===void 0?Fe:n,l=dn(e,["classes","currentDecade","formatYear"]),c=l.date,u=l.locale,s=[];return a&&s.push.apply(s,a),s.push(tr),J(c).getFullYear()!==r&&s.push("".concat(tr,"--neighboringDecade")),i.jsx(Re,ht({},l,{classes:s,maxDateTransform:Ye,minDateTransform:oe,view:"decade",children:o(u,c)}))}var yt=function(){return yt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},yt.apply(this,arguments)},rr=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function mn(e){var t=e.activeStartDate,a=e.hover,r=e.showNeighboringDecade,n=e.value,o=e.valueType,l=rr(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),c=Ua(t),u=c+(r?11:9);return i.jsx(Ve,{className:"react-calendar__decade-view__years",dateTransform:oe,dateType:"year",end:u,hover:a,renderTile:function(s){var d=s.date,v=rr(s,["date"]);return i.jsx(vn,yt({},l,v,{activeStartDate:t,currentDecade:c,date:d}),d.getTime())},start:c,value:n,valueType:o})}var gt=function(){return gt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},gt.apply(this,arguments)};function hn(e){function t(){return i.jsx(mn,gt({},e))}return i.jsx("div",{className:"react-calendar__decade-view",children:t()})}var bt=function(){return bt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},bt.apply(this,arguments)},yn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},ar=function(e,t,a){if(a||arguments.length===2)for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},gn="react-calendar__year-view__months__month";function bn(e){var t=e.classes,a=t===void 0?[]:t,r=e.formatMonth,n=r===void 0?Fa:r,o=e.formatMonthYear,l=o===void 0?pr:o,c=yn(e,["classes","formatMonth","formatMonthYear"]),u=c.date,s=c.locale;return i.jsx(Re,bt({},c,{classes:ar(ar([],a,!0),[gn],!1),formatAbbr:l,maxDateTransform:ge,minDateTransform:Z,view:"year",children:n(s,u)}))}var wt=function(){return wt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},wt.apply(this,arguments)},nr=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function wn(e){var t=e.activeStartDate,a=e.hover,r=e.value,n=e.valueType,o=nr(e,["activeStartDate","hover","value","valueType"]),l=0,c=11,u=O(t);return i.jsx(Ve,{className:"react-calendar__year-view__months",dateTransform:function(s){var d=new Date;return d.setFullYear(u,s,1),Z(d)},dateType:"month",end:c,hover:a,renderTile:function(s){var d=s.date,v=nr(s,["date"]);return i.jsx(bn,wt({},o,v,{activeStartDate:t,date:d}),d.getTime())},start:l,value:r,valueType:n})}var xt=function(){return xt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},xt.apply(this,arguments)};function xn(e){function t(){return i.jsx(wn,xt({},e))}return i.jsx("div",{className:"react-calendar__year-view",children:t()})}var Dt=function(){return Dt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Dt.apply(this,arguments)},Dn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},ot="react-calendar__month-view__days__day";function pn(e){var t=e.calendarType,a=e.classes,r=a===void 0?[]:a,n=e.currentMonthIndex,o=e.formatDay,l=o===void 0?Ia:o,c=e.formatLongDate,u=c===void 0?Ya:c,s=Dn(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),d=s.date,v=s.locale,f=[];return r&&f.push.apply(f,r),f.push(ot),Nr(d,t)&&f.push("".concat(ot,"--weekend")),d.getMonth()!==n&&f.push("".concat(ot,"--neighboringMonth")),i.jsx(Re,Dt({},s,{classes:f,formatAbbr:u,maxDateTransform:Ct,minDateTransform:be,view:"month",children:l(v,d)}))}var pt=function(){return pt=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},pt.apply(this,arguments)},ir=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function On(e){var t=e.activeStartDate,a=e.calendarType,r=e.hover,n=e.showFixedNumberOfWeeks,o=e.showNeighboringMonth,l=e.value,c=e.valueType,u=ir(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),s=O(t),d=K(t),v=n||o,f=ve(t,a),m=v?0:f,g=(v?-f:0)+1,y=function(){if(n)return g+6*7-1;var b=Dr(t);if(o){var p=new Date;p.setFullYear(s,d,b),p.setHours(0,0,0,0);var L=7-ve(p,a)-1;return b+L}return b}();return i.jsx(Ve,{className:"react-calendar__month-view__days",count:7,dateTransform:function(b){var p=new Date;return p.setFullYear(s,d,b),be(p)},dateType:"day",hover:r,end:y,renderTile:function(b){var p=b.date,L=ir(b,["date"]);return i.jsx(pn,pt({},u,L,{activeStartDate:t,calendarType:a,currentMonthIndex:d,date:p}),p.getTime())},offset:m,start:g,value:l,valueType:c})}var Cr="react-calendar__month-view__weekdays",lt="".concat(Cr,"__weekday");function _n(e){for(var t=e.calendarType,a=e.formatShortWeekday,r=a===void 0?Va:a,n=e.formatWeekday,o=n===void 0?Ra:n,l=e.locale,c=e.onMouseLeave,u=new Date,s=Z(u),d=O(s),v=K(s),f=[],m=1;m<=7;m+=1){var g=new Date(d,v,m-ve(s,t)),y=o(l,g);f.push(i.jsx("div",{className:Me(lt,en(g)&&"".concat(lt,"--current"),Nr(g,t)&&"".concat(lt,"--weekend")),children:i.jsx("abbr",{"aria-label":y,title:y,children:r(l,g).replace(".","")})},m))}return i.jsx(Tt,{className:Cr,count:7,onFocus:c,onMouseOver:c,children:f})}var Le=function(){return Le=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Le.apply(this,arguments)},or=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},lr="react-calendar__tile";function jn(e){var t=e.onClickWeekNumber,a=e.weekNumber,r=i.jsx("span",{children:a});if(t){var n=e.date,o=e.onClickWeekNumber,l=e.weekNumber,c=or(e,["date","onClickWeekNumber","weekNumber"]);return i.jsx("button",Le({},c,{className:lr,onClick:function(u){return o(l,n,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var c=or(e,["date","onClickWeekNumber","weekNumber"]);return i.jsx("div",Le({},c,{className:lr,children:r}))}}function Sn(e){var t=e.activeStartDate,a=e.calendarType,r=e.onClickWeekNumber,n=e.onMouseLeave,o=e.showFixedNumberOfWeeks,l=function(){if(o)return 6;var s=Dr(t),d=ve(t,a),v=s-(7-d);return 1+Math.ceil(v/7)}(),c=function(){for(var s=O(t),d=K(t),v=We(t),f=[],m=0;m<l;m+=1)f.push(ft(new Date(s,d,v+m*7),a));return f}(),u=c.map(function(s){return Ba(s,a)});return i.jsx(Tt,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:n,onMouseOver:n,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(s,d){var v=c[d];if(!v)throw new Error("date is not defined");return i.jsx(jn,{date:v,onClickWeekNumber:r,weekNumber:s},s)})})}var Ot=function(){return Ot=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ot.apply(this,arguments)},Nn=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function kn(e){if(e)for(var t=0,a=Object.entries(Na);t<a.length;t++){var r=a[t],n=r[0],o=r[1];if(o.includes(e))return n}return C.ISO_8601}function Cn(e){var t=e.activeStartDate,a=e.locale,r=e.onMouseLeave,n=e.showFixedNumberOfWeeks,o=e.calendarType,l=o===void 0?kn(a):o,c=e.formatShortWeekday,u=e.formatWeekday,s=e.onClickWeekNumber,d=e.showWeekNumbers,v=Nn(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function f(){return i.jsx(_n,{calendarType:l,formatShortWeekday:c,formatWeekday:u,locale:a,onMouseLeave:r})}function m(){return d?i.jsx(Sn,{activeStartDate:t,calendarType:l,onClickWeekNumber:s,onMouseLeave:r,showFixedNumberOfWeeks:n}):null}function g(){return i.jsx(On,Ot({calendarType:l},v))}var y="react-calendar__month-view";return i.jsx("div",{className:Me(y,d?"".concat(y,"--weekNumbers"):""),children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[m(),i.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[f(),g()]})]})})}var ne=function(){return ne=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ne.apply(this,arguments)},Ae="react-calendar",Pe=["century","decade","year","month"],An=["decade","year","month","day"],Pt=new Date;Pt.setFullYear(1,0,1);Pt.setHours(0,0,0,0);var Tn=new Date(864e13);function de(e){return e instanceof Date?e:new Date(e)}function Ar(e,t){return Pe.slice(Pe.indexOf(e),Pe.indexOf(t)+1)}function Pn(e,t,a){var r=Ar(t,a);return r.indexOf(e)!==-1}function Et(e,t,a){return e&&Pn(e,t,a)?e:a}function Tr(e){var t=Pe.indexOf(e);return An[t]}function En(e,t){var a=Array.isArray(e)?e[t]:e;if(!a)return null;var r=de(a);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function Pr(e,t){var a=e.value,r=e.minDate,n=e.maxDate,o=e.maxDetail,l=En(a,t);if(!l)return null;var c=Tr(o),u=function(){switch(t){case 0:return Q(c,l);case 1:return _r(c,l);default:throw new Error("Invalid index value: ".concat(t))}}();return an(u,r,n)}var Lt=function(e){return Pr(e,0)},Er=function(e){return Pr(e,1)},Ln=function(e){return[Lt,Er].map(function(t){return t(e)})};function Lr(e){var t=e.maxDate,a=e.maxDetail,r=e.minDate,n=e.minDetail,o=e.value,l=e.view,c=Et(l,n,a),u=Lt({value:o,minDate:r,maxDate:t,maxDetail:a})||new Date;return Q(c,u)}function Mn(e){var t=e.activeStartDate,a=e.defaultActiveStartDate,r=e.defaultValue,n=e.defaultView,o=e.maxDate,l=e.maxDetail,c=e.minDate,u=e.minDetail,s=e.value,d=e.view,v=Et(d,u,l),f=t||a;return f?Q(v,f):Lr({maxDate:o,maxDetail:l,minDate:c,minDetail:u,value:s||r,view:d||n})}function ct(e){return e&&(!Array.isArray(e)||e.length===1)}function Te(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var Wn=x.forwardRef(function(t,a){var r=t.activeStartDate,n=t.allowPartialRange,o=t.calendarType,l=t.className,c=t.defaultActiveStartDate,u=t.defaultValue,s=t.defaultView,d=t.formatDay,v=t.formatLongDate,f=t.formatMonth,m=t.formatMonthYear,g=t.formatShortWeekday,y=t.formatWeekday,b=t.formatYear,p=t.goToRangeStartOnSelect,L=p===void 0?!0:p,X=t.inputRef,h=t.locale,S=t.maxDate,D=S===void 0?Tn:S,F=t.maxDetail,T=F===void 0?"month":F,le=t.minDate,V=le===void 0?Pt:le,we=t.minDetail,H=we===void 0?"century":we,xe=t.navigationAriaLabel,te=t.navigationAriaLive,$e=t.navigationLabel,M=t.next2AriaLabel,Ge=t.next2Label,He=t.nextAriaLabel,U=t.nextLabel,A=t.onActiveStartDateChange,B=t.onChange,re=t.onClickDay,ce=t.onClickDecade,De=t.onClickMonth,Ue=t.onClickWeekNumber,pe=t.onClickYear,se=t.onDrillDown,ue=t.onDrillUp,q=t.onViewChange,Be=t.prev2AriaLabel,qe=t.prev2Label,Oe=t.prevAriaLabel,ze=t.prevLabel,k=t.returnValue,fe=k===void 0?"start":k,W=t.selectRange,_e=t.showDoubleView,Mt=t.showFixedNumberOfWeeks,Wt=t.showNavigation,Mr=Wt===void 0?!0:Wt,Wr=t.showNeighboringCentury,Ir=t.showNeighboringDecade,It=t.showNeighboringMonth,Yr=It===void 0?!0:It,Fr=t.showWeekNumbers,Vr=t.tileClassName,Rr=t.tileContent,$r=t.tileDisabled,Ke=t.value,Yt=t.view,Ft=x.useState(c),Gr=Ft[0],je=Ft[1],Vt=x.useState(null),Hr=Vt[0],Rt=Vt[1],$t=x.useState(Array.isArray(u)?u.map(function(w){return w!==null?de(w):null}):u!=null?de(u):null),Je=$t[0],Ur=$t[1],Gt=x.useState(s),Br=Gt[0],Ht=Gt[1],P=r||Gr||Mn({activeStartDate:r,defaultActiveStartDate:c,defaultValue:u,defaultView:s,maxDate:D,maxDetail:T,minDate:V,minDetail:H,value:Ke,view:Yt}),E=function(){var w=function(){return W&&ct(Je)?Je:Ke!==void 0?Ke:Je}();return w?Array.isArray(w)?w.map(function(j){return j!==null?de(j):null}):w!==null?de(w):null:null}(),Se=Tr(T),_=Et(Yt||Br,H,T),R=Ar(H,T),qr=W?Hr:null,Xe=R.indexOf(_)<R.length-1,Ut=R.indexOf(_)>0,Bt=x.useCallback(function(w){var j=function(){switch(fe){case"start":return Lt;case"end":return Er;case"range":return Ln;default:throw new Error("Invalid returnValue.")}}();return j({maxDate:D,maxDetail:T,minDate:V,value:w})},[D,T,V,fe]),Qe=x.useCallback(function(w,j){je(w);var N={action:j,activeStartDate:w,value:E,view:_};A&&!Te(P,w)&&A(N)},[P,A,E,_]),Ne=x.useCallback(function(w,j){var N=function(){switch(_){case"century":return ce;case"decade":return pe;case"year":return De;case"month":return re;default:throw new Error("Invalid view: ".concat(_,"."))}}();N&&N(w,j)},[re,ce,De,pe,_]),Ze=x.useCallback(function(w,j){if(Xe){Ne(w,j);var N=R[R.indexOf(_)+1];if(!N)throw new Error("Attempted to drill down from the lowest view.");je(w),Ht(N);var I={action:"drillDown",activeStartDate:w,value:E,view:N};A&&!Te(P,w)&&A(I),q&&_!==N&&q(I),se&&se(I)}},[P,Xe,A,Ne,se,q,E,_,R]),et=x.useCallback(function(){if(Ut){var w=R[R.indexOf(_)-1];if(!w)throw new Error("Attempted to drill up from the highest view.");var j=Q(w,P);je(j),Ht(w);var N={action:"drillUp",activeStartDate:j,value:E,view:w};A&&!Te(P,j)&&A(N),q&&_!==w&&q(N),ue&&ue(N)}},[P,Ut,A,ue,q,E,_,R]),tt=x.useCallback(function(w,j){var N=E;Ne(w,j);var I=W&&!ct(N),Y;if(W)if(I)Y=Q(Se,w);else{if(!N)throw new Error("previousValue is required");if(Array.isArray(N))throw new Error("previousValue must not be an array");Y=Qa(Se,N,w)}else Y=Bt(w);var at=!W||I||L?Lr({maxDate:D,maxDetail:T,minDate:V,minDetail:H,value:Y,view:_}):null;j.persist(),je(at),Ur(Y);var Xr={action:"onChange",activeStartDate:at,value:Y,view:_};if(A&&!Te(P,at)&&A(Xr),B)if(W){var Qr=ct(Y);if(!Qr)B(Y||null,j);else if(n){if(Array.isArray(Y))throw new Error("value must not be an array");B([Y||null,null],j)}}else B(Y||null,j)},[P,n,Bt,L,D,T,V,H,A,B,Ne,W,E,Se,_]);function zr(w){Rt(w)}function rt(){Rt(null)}x.useImperativeHandle(a,function(){return{activeStartDate:P,drillDown:Ze,drillUp:et,onChange:tt,setActiveStartDate:Qe,value:E,view:_}},[P,Ze,et,tt,Qe,E,_]);function qt(w){var j=w?Or(_,P):Q(_,P),N=Xe?Ze:tt,I={activeStartDate:j,hover:qr,locale:h,maxDate:D,minDate:V,onClick:N,onMouseOver:W?zr:void 0,tileClassName:Vr,tileContent:Rr,tileDisabled:$r,value:E,valueType:Se};switch(_){case"century":return i.jsx(fn,ne({formatYear:b,showNeighboringCentury:Wr},I));case"decade":return i.jsx(hn,ne({formatYear:b,showNeighboringDecade:Ir},I));case"year":return i.jsx(xn,ne({formatMonth:f,formatMonthYear:m},I));case"month":return i.jsx(Cn,ne({calendarType:o,formatDay:d,formatLongDate:v,formatShortWeekday:g,formatWeekday:y,onClickWeekNumber:Ue,onMouseLeave:W?rt:void 0,showFixedNumberOfWeeks:typeof Mt<"u"?Mt:_e,showNeighboringMonth:Yr,showWeekNumbers:Fr},I));default:throw new Error("Invalid view: ".concat(_,"."))}}function Kr(){return Mr?i.jsx(tn,{activeStartDate:P,drillUp:et,formatMonthYear:m,formatYear:b,locale:h,maxDate:D,minDate:V,navigationAriaLabel:xe,navigationAriaLive:te,navigationLabel:$e,next2AriaLabel:M,next2Label:Ge,nextAriaLabel:He,nextLabel:U,prev2AriaLabel:Be,prev2Label:qe,prevAriaLabel:Oe,prevLabel:ze,setActiveStartDate:Qe,showDoubleView:_e,view:_,views:R}):null}var Jr=Array.isArray(E)?E:[E];return i.jsxs("div",{className:Me(Ae,W&&Jr.length===1&&"".concat(Ae,"--selectRange"),_e&&"".concat(Ae,"--doubleView"),l),ref:X,children:[Kr(),i.jsxs("div",{className:"".concat(Ae,"__viewContainer"),onBlur:W?rt:void 0,onMouseLeave:W?rt:void 0,children:[qt(),_e?qt(!0):null]})]})});const In=()=>{const[e,t]=x.useState([]),[a,r]=x.useState(!0),[n,o]=x.useState(!1),[l,c]=x.useState(null);x.useEffect(()=>{(async()=>{try{const{data:m,error:g}=await z.from("newsletter_subscribers").select("*").order("created_at",{ascending:!1});if(g)throw g;t(m||[])}catch(m){console.error("Error fetching subscribers:",m),alert("Error fetching subscribers")}finally{r(!1)}})()},[]);const u=()=>{const f=e.map(m=>m.email).join(", ");navigator.clipboard.writeText(f).then(()=>alert("Emails copied to clipboard!")).catch(m=>{console.error("Failed to copy:",m),alert("Failed to copy emails")})},s=async f=>{c(f),o(!0)},d=async()=>{try{const{error:f}=await z.from("newsletter_subscribers").delete().eq("id",l.id);if(f)throw f;t(e.filter(m=>m.id!==l.id)),o(!1),c(null)}catch(f){console.error("Error deleting subscriber:",f),alert("Error deleting subscriber")}},v=()=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Unsubscribe"}),i.jsxs("p",{className:"mb-6",children:["Are you sure you want to remove"," ",i.jsx("span",{className:"font-semibold",children:l?.email})," ","from the newsletter?"]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{onClick:()=>{o(!1),c(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Unsubscribe"})]})]})});return i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Newsletter Subscribers"}),i.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Copy All Emails"})]}),a?i.jsx("div",{className:"text-center py-4",children:"Loading subscribers..."}):e.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No subscribers yet"}):i.jsx("div",{className:"space-y-2",children:e.map(f=>i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-gray-50 rounded-lg",children:[i.jsx("span",{children:f.email}),i.jsx("button",{onClick:()=>s(f),className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Unsubscribe",children:"X"})]},f.id))}),n&&i.jsx(v,{})]})},Gn=()=>{const[e,t]=x.useState(null),[a,r]=x.useState(!0),[n,o]=x.useState(new Date),[l,c]=x.useState([]),[u,s]=x.useState(!1),[d,v]=x.useState(!1),[f,m]=x.useState(null);x.useEffect(()=>{(async()=>{try{const{data:{session:D}}=await z.auth.getSession();if(console.log("Current session:",D),!D){console.log("No session found, redirecting to login"),window.location.replace("/login");return}t(D)}catch(D){console.error("Session check error:",D),window.location.replace("/login")}finally{r(!1)}})();const{data:{subscription:S}}=z.auth.onAuthStateChange((D,F)=>{if(console.log("Auth state changed:",D,F),!F){window.location.replace("/login");return}t(F),r(!1)});return()=>S.unsubscribe()},[]),x.useEffect(()=>{n&&(async()=>{s(!0);try{const S=new Date(n);S.setHours(0,0,0,0);const D=new Date(n);D.setHours(23,59,59,999);const{data:F,error:T}=await z.from("appointments").select("*").gte("start_time",S.toISOString()).lt("start_time",D.toISOString()).order("start_time",{ascending:!0});if(T)throw T;c(F||[])}catch(S){console.error("Error fetching appointments:",S)}finally{s(!1)}})()},[n]);const g=h=>{o(h)},y=async()=>{try{await z.auth.signOut(),window.location.replace("/")}catch(h){console.error("Logout error:",h)}},b=h=>{m(h),v(!0)},p=async h=>{try{const S=await fetch("/api/sendCancellation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email,client_name:h.client_name,appointment_type:h.appointment_type,start_time:h.start_time,duration_minutes:h.duration_minutes})}),D=await S.json();if(console.log("Server response:",D),!S.ok)throw new Error(D.message||"Failed to send email");return!0}catch(S){return console.error("Email sending error:",S),!1}},L=async()=>{if(f)try{if(f.email&&!await p(f)&&!confirm("Failed to send notification email. Continue with cancellation?"))return;const{error:h}=await z.from("archived_appointments").insert([{client_name:f.client_name,phone_number:f.phone_number,email:f.email,notes:f.notes,appointment_type:f.appointment_type,start_time:f.start_time,duration_minutes:f.duration_minutes,archived_at:new Date().toISOString(),archived_by:e.user.email}]);if(h)throw h;const{error:S}=await z.from("appointments").delete().match({id:f.id});if(S)throw S;c(l.filter(D=>D.id!==f.id)),v(!1),m(null),alert("Appuntamento archiviato con successo"+(f.email?" e email di notifica inviata":""))}catch(h){console.error("Error in archive process:",h),alert("Errore durante la cancellazione dell'appuntamento")}},X=()=>i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Archive"}),i.jsxs("p",{className:"mb-6",children:["Are you sure you want to archive the appointment for"," ",i.jsx("span",{className:"font-semibold",children:f?.client_name})," ","on"," ",f&&Ce(new Date(f.start_time),"dd/MM/yyyy HH:mm"),"?"]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{onClick:()=>{v(!1),m(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),i.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Archive"})]})]})});return a?i.jsx("div",{className:"p-4",children:"Loading..."}):e?.user?i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",e.user.email]}),i.jsx("button",{onClick:y,className:"px-4 py-2 font-bold text-white bg-blue-600 rounded hover:bg-blue-700",children:"Logout"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Calendar"}),i.jsx(Wn,{onChange:g,value:n,className:"w-full"})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Appointments for ",Ce(n,"dd/MM/yyyy")]}),u?i.jsx("div",{className:"text-center py-4",children:"Loading appointments..."}):l.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500",children:"No appointments for this date"}):i.jsx("div",{className:"space-y-4",children:l.map(h=>i.jsxs("div",{className:"border p-4 rounded-lg hover:bg-gray-50 relative",children:[i.jsx("button",{onClick:()=>b(h),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Archive appointment",children:"Ã—"}),i.jsxs("div",{className:"flex justify-between items-start pr-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:h.client_name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[Ce(new Date(h.start_time),"HH:mm")," -",Ce(new Date(new Date(h.start_time).getTime()+h.duration_minutes*6e4),"HH:mm")]}),i.jsx("p",{className:"text-sm",children:h.appointment_type})]}),i.jsxs("div",{className:"text-right text-sm text-gray-500",children:[i.jsx("p",{children:h.phone_number}),i.jsx("p",{children:h.email})]})]}),h.notes&&i.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Notes: ",h.notes]})]},h.id))})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(In,{})})]}),d&&i.jsx(X,{})]}):i.jsx("div",{className:"p-4",children:"Redirecting to login..."})};export{Gn as default};
